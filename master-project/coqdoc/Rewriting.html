<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>Rewriting</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Rewriting</h1>

<div class="code">

<br/>
</div>

<div class="doc">
This library defines the type <span class="inlinecode"><span class="id" type="var">s</span> -&gt;&gt; <span class="id" type="var">t</span></span> of transfinite rewrite
   sequences.

<br/> <br/>
   The inductive definition of rewrite sequences is based on that of the
   tree ordinals (see the <span class="inlinecode"><span class="id" type="var">Ordinal</span></span> library). A rewrite sequence of ordinal
   length alpha is represented by the tree structure of (the tree ordinal)
   alpha where all <span class="inlinecode"><span class="id" type="var">Succ</span></span> constructors are labeled with rewrite steps.

<br/> <br/>
   The notion of predecessor index and the order on <span class="inlinecode"><span class="id" type="var">ord</span></span> are lifted to
   <span class="inlinecode"><span class="id" type="var">sequence</span></span>. The order then becomes an embedding relation on rewrite
   sequences.

<br/> <br/>
   The lifting of ordinal addition yields a concatenation function on
   rewrite sequences.

<br/> <br/>
   For more information, see:

<br/> <br/>
     Martijn Vermaat.
     Infinitary Rewriting in Coq.
     Master Thesis, VU University Amsterdam, 2010.

<br/> <br/>
   
    <a href="http://martijn.vermaat.name/master-project">http://martijn.vermaat.name/master-project</a> 

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Prelims.html#"><span class="id" type="library">Prelims</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#"><span class="id" type="library">List</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="FiniteTerm.html#"><span class="id" type="library">FiniteTerm</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Term.html#"><span class="id" type="library">Term</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Substitution.html#"><span class="id" type="library">Substitution</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <span class="id" type="keyword">Context</span>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="ContextEquality.html#"><span class="id" type="library">ContextEquality</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="Ordinal.html#"><span class="id" type="library">Ordinal</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Export</span> <a class="idref" href="TermEquality.html#"><span class="id" type="library">TermEquality</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Program.Equality.html#"><span class="id" type="library">Equality</span></a>.<br/>

<br/>
<span class="id" type="keyword">Set</span> <span class="id" type="keyword">Implicit</span> <span class="id" type="var">Arguments</span>.<br/>

<br/>
<span class="id" type="keyword">Section</span> <a name="Rule"><span class="id" type="section">Rule</span></a>.<br/>

<br/>
</div>

<div class="doc">
We define rewrite rules as pairs of finite terms with the usual
   restrictions. A term rewriting system (TRS) is a list of rewrite
   rules (where the order of no importance). 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Variable</span> <a name="Rule.F"><span class="id" type="variable">F</span></a> : <a class="idref" href="Signature.html#signature"><span class="id" type="record">signature</span></a>.<br/>
<span class="id" type="keyword">Variable</span> <a name="Rule.X"><span class="id" type="variable">X</span></a> : <a class="idref" href="Variables.html#variables"><span class="id" type="record">variables</span></a>.<br/>

<br/>
<span class="id" type="var">Notation </span><a name="fterm"><span class="id" type="abbreviation">fterm</span></a> := (<a class="idref" href="FiniteTerm.html#finite_term"><span class="id" type="inductive">finite_term</span></a> <a class="idref" href="Rewriting.html#Rule.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#Rule.X"><span class="id" type="variable">X</span></a>).<br/>

<br/>
</div>

<div class="doc">
Rewrite rules of finite terms. 
</div>
<div class="code">
<span class="id" type="keyword">Record</span> <a name="rule"><span class="id" type="record">rule</span></a> : <span class="id" type="keyword">Type</span> := <a name="Rule"><span class="id" type="constructor">Rule</span></a> {<br/>
&nbsp;&nbsp;<a name="lhs"><span class="id" type="projection">lhs</span></a>     : <a class="idref" href="Rewriting.html#fterm"><span class="id" type="abbreviation">fterm</span></a>;<br/>
&nbsp;&nbsp;<a name="rhs"><span class="id" type="projection">rhs</span></a>     : <a class="idref" href="Rewriting.html#fterm"><span class="id" type="abbreviation">fterm</span></a>;<br/>
&nbsp;&nbsp;<a name="rule_wf"><span class="id" type="projection">rule_wf</span></a> : <a class="idref" href="Term.html#is_var"><span class="id" type="definition">is_var</span></a> <a class="idref" href="Rewriting.html#lhs"><span class="id" type="method">lhs</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#incl"><span class="id" type="definition">incl</span></a> (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="Rewriting.html#rhs"><span class="id" type="method">rhs</span></a>) (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="Rewriting.html#lhs"><span class="id" type="method">lhs</span></a>)<br/>
}.<br/>

<br/>
</div>

<div class="doc">
Left hand side is linear. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="left_linear"><span class="id" type="definition">left_linear</span></a> (<span class="id" type="var">r</span> : <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="FiniteTerm.html#linear"><span class="id" type="definition">linear</span></a> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>).<br/>

<br/>
</div>

<div class="doc">
A Term Rewriting System as a finite list of of rewrite rules. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="trs"><span class="id" type="definition">trs</span></a> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#list"><span class="id" type="inductive">list</span></a> <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a>.<br/>

<br/>
</div>

<div class="doc">
All rules are left-linear. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="trs_left_linear"><span class="id" type="definition">trs_left_linear</span></a> (<span class="id" type="var">s</span> : <a class="idref" href="Rewriting.html#trs"><span class="id" type="definition">trs</span></a>) : <span class="id" type="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#Forall"><span class="id" type="inductive">Forall</span></a> <a class="idref" href="Rewriting.html#left_linear"><span class="id" type="definition">left_linear</span></a> <span class="id" type="var">s</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="Rewriting.html#Rule"><span class="id" type="section">Rule</span></a>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a> [<span class="id" type="var">F</span> <span class="id" type="var">X</span>].<br/>

<br/>
<span class="id" type="keyword">Section</span> <a name="TRS"><span class="id" type="section">TRS</span></a>.<br/>

<br/>
</div>

<div class="doc">
We consider a TRS and define rewrite steps over its rewrite rules.
   The rewrite steps are then used to construct transfinite rewrite
   sequences. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Variable</span> <a name="TRS.F"><span class="id" type="variable">F</span></a> : <a class="idref" href="Signature.html#signature"><span class="id" type="record">signature</span></a>.<br/>
<span class="id" type="keyword">Variable</span> <a name="TRS.X"><span class="id" type="variable">X</span></a> : <a class="idref" href="Variables.html#variables"><span class="id" type="record">variables</span></a>.<br/>

<br/>
<span class="id" type="var">Notation </span><a name="term"><span class="id" type="abbreviation">term</span></a> := (<a class="idref" href="Term.html#term"><span class="id" type="inductive">term</span></a> <a class="idref" href="Rewriting.html#TRS.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#TRS.X"><span class="id" type="variable">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="fterm"><span class="id" type="abbreviation">fterm</span></a> := (<a class="idref" href="FiniteTerm.html#finite_term"><span class="id" type="inductive">finite_term</span></a> <a class="idref" href="Rewriting.html#TRS.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#TRS.X"><span class="id" type="variable">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="context"><span class="id" type="abbreviation">context</span></a> := (<a class="idref" href="Context.html#context"><span class="id" type="inductive">context</span></a> <a class="idref" href="Rewriting.html#TRS.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#TRS.X"><span class="id" type="variable">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="substitution"><span class="id" type="abbreviation">substitution</span></a> := (<a class="idref" href="Substitution.html#substitution"><span class="id" type="definition">substitution</span></a> <a class="idref" href="Rewriting.html#TRS.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#TRS.X"><span class="id" type="variable">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="trs"><span class="id" type="abbreviation">trs</span></a> := (<a class="idref" href="Rewriting.html#trs"><span class="id" type="definition">trs</span></a> <a class="idref" href="Rewriting.html#TRS.F"><span class="id" type="variable">F</span></a> <a class="idref" href="Rewriting.html#TRS.X"><span class="id" type="variable">X</span></a>).<br/>

<br/>
<span class="id" type="keyword">Variable</span> <a name="TRS.system"><span class="id" type="variable">system</span></a> : <a class="idref" href="Rewriting.html#trs"><span class="id" type="abbreviation">trs</span></a>.<br/>

<br/>
<span class="id" type="var">Generalizable</span> <span class="id" type="var">All</span> <span class="id" type="keyword">Variables</span>.<br/>

<br/>
</div>

<div class="doc">
Critical pairs denote overlap of rewrite rules. Note that we do not
   consider most general common instances, minimality of substitutions, and
   freshness conditions in the defition of <span class="inlinecode"><span class="id" type="var">critical_pair</span></span>. This definition
   suffices for our present purposes and is not too complex. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="critical_pair"><span class="id" type="definition">critical_pair</span></a> (<span class="id" type="var">t1</span> <span class="id" type="var">t2</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">r1</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">r2</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Term.html#position"><span class="id" type="abbreviation">position</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">sigma</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#substitution"><span class="id" type="abbreviation">substitution</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">tau</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#substitution"><span class="id" type="abbreviation">substitution</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <span class="id" type="var">r1</span> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <span class="id" type="var">r2</span> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><span class="id" type="var">r1</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">r2</span> -&gt; <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_<>_x"><span class="id" type="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <a class="idref" href="Term.html#finite_subterm"><span class="id" type="definition">finite_subterm</span></a> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r1</span>) <span class="id" type="var">p</span>, <a class="idref" href="Context.html#dig"><span class="id" type="definition">dig</span></a> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">sigma</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r1</span>)) <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">s</span>, <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" type="constructor">Some</span></a> <span class="id" type="var">c</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Term.html#is_var"><span class="id" type="definition">is_var</span></a> <span class="id" type="var">s</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">sigma</span> <span class="id" type="var">s</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">tau</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r2</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t1</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">tau</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r2</span>)) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t2</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">sigma</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" type="var">_</span>, <span class="id" type="var">_</span>           =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
An orthogonal TRS is left-linear and has no critical pairs. A weakly
   orthogonal TRS is left-linear and has only trivial critical pairs. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="orthogonal"><span class="id" type="definition">orthogonal</span></a> : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#trs_left_linear"><span class="id" type="definition">trs_left_linear</span></a> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>, <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#critical_pair"><span class="id" type="definition">critical_pair</span></a> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="weakly_orthogonal"><span class="id" type="definition">weakly_orthogonal</span></a> : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#trs_left_linear"><span class="id" type="definition">trs_left_linear</span></a> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>, <a class="idref" href="Rewriting.html#critical_pair"><span class="id" type="definition">critical_pair</span></a> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> -&gt; <span class="id" type="var">t1</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t2</span>.<br/>

<br/>
</div>

<div class="doc">
The type <span class="inlinecode"><span class="id" type="var">s</span> [&gt;] <span class="id" type="var">t</span></span> of rewrite steps is parameterised by source and
   target terms <span class="inlinecode"><span class="id" type="var">s</span></span> and <span class="inlinecode"><span class="id" type="var">t</span></span>. We allow some flexivility in <span class="inlinecode"><span class="id" type="var">s</span></span> and <span class="inlinecode"><span class="id" type="var">t</span></span> in
   the form of bisimilarity. 
</div>
<div class="code">

<br/>
<span class="id" type="var">Reserved Notation </span>"s [&gt;] t" (<span class="id" type="var">no</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="step"><span class="id" type="inductive">step</span></a> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> -&gt; <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> -&gt; <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Step"><span class="id" type="constructor">Step</span></a> : <span class="id" type="keyword">forall</span> (<span class="id" type="var">s</span> <span class="id" type="var">t</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>) (<span class="id" type="var">r</span> : <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a>) (<span class="id" type="var">c</span> : <a class="idref" href="Rewriting.html#context"><span class="id" type="abbreviation">context</span></a>) (<span class="id" type="var">u</span> : <a class="idref" href="Rewriting.html#substitution"><span class="id" type="abbreviation">substitution</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>)) <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">s</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r</span>)) <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span><br/>
<span class="id" type="var">where </span><a name="TRS.::x_[>]_x"><span class="id" type="notation">"</span></a>s [&gt;] t" := (<a class="idref" href="Rewriting.html#step"><span class="id" type="inductive">step</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
Equality of steps <span class="inlinecode"><span class="id" type="var">step_eq</span></span> requires;
<ul>
<li> bisimilarity of contexts

</li>
<li> equality of rules

</li>
<li> equality of substitutions for all variables in the rule.

</li>
</ul>
   This implies bisimilarity of source and target terms. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="step_eq"><span class="id" type="definition">step_eq</span></a> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">o</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span>, <span class="id" type="var">o</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">r</span> <span class="id" type="var">c</span> <span class="id" type="var">u</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>, <a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">r'</span> <span class="id" type="var">c'</span> <span class="id" type="var">u'</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="ContextEquality.html#context_bis"><span class="id" type="inductive">context_bis</span></a> <span class="id" type="var">c</span> <span class="id" type="var">c'</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">r'</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="Substitution.html#substitution_eq"><span class="id" type="definition">substitution_eq</span></a> (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>)) <span class="id" type="var">u</span> <span class="id" type="var">u'</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Note that this lemma is tainted by <span class="inlinecode"><span class="id" type="var">substitution_eq_substitute</span></span>, which
   is not proved yet. See the <span class="inlinecode"><span class="id" type="var">Substitution</span></span> library. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="step_eq_source"><span class="id" type="lemma">step_eq_source</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">o</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">s</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">u</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">c</span> <span class="id" type="var">a</span> <span class="id" type="var">Hr</span> <span class="id" type="var">Hs</span> <span class="id" type="var">Ht</span>] <span class="id" type="var">_</span> <span class="id" type="var">_</span> [<span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">r'</span> <span class="id" type="var">c'</span> <span class="id" type="var">b</span> <span class="id" type="var">Hr'</span> <span class="id" type="var">Hu</span> <span class="id" type="var">Hv</span>] <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">a</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>))).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_symm"><span class="id" type="lemma">term_bis_symm</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c'</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">b</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r'</span>))).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> [<span class="id" type="var">H2</span> <span class="id" type="var">H3</span>]].<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">b</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>))).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Context.html#fill_term_bis"><span class="id" type="lemma">fill_term_bis</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_substitute"><span class="id" type="axiom">substitution_eq_substitute</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="ContextEquality.html#fill_context_bis"><span class="id" type="lemma">fill_context_bis</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Note that this lemma is tainted by <span class="inlinecode"><span class="id" type="var">substitution_eq_substitute</span></span> and
   <span class="inlinecode"><span class="id" type="var">substitution_eq_incl</span>, <span class="id" type="var">which</span> <span class="id" type="var">are</span> <span class="id" type="var">not</span> <span class="id" type="var">proved</span> <span class="id" type="var">yet</span>. <span class="id" type="var">See</span> <span class="id" type="var">the</span> [<span class="id" type="var">Substitution</span>]
   <span class="id" type="var">library</span>. </span>
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="step_eq_target"><span class="id" type="lemma">step_eq_target</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">o</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">v</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">c</span> <span class="id" type="var">a</span> <span class="id" type="var">Hr</span> <span class="id" type="var">Hs</span> <span class="id" type="var">Ht</span>] <span class="id" type="var">_</span> <span class="id" type="var">_</span> [<span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">r'</span> <span class="id" type="var">c'</span> <span class="id" type="var">b</span> <span class="id" type="var">Hr'</span> <span class="id" type="var">Hu</span> <span class="id" type="var">Hv</span>] <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">a</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r</span>))).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_symm"><span class="id" type="lemma">term_bis_symm</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c'</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">b</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r'</span>))).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> [<span class="id" type="var">H2</span> <span class="id" type="var">H3</span>]].<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">b</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r</span>))).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Context.html#fill_term_bis"><span class="id" type="lemma">fill_term_bis</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_substitute"><span class="id" type="axiom">substitution_eq_substitute</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_incl"><span class="id" type="axiom">substitution_eq_incl</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>)).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#rule_wf"><span class="id" type="projection">rule_wf</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="ContextEquality.html#fill_context_bis"><span class="id" type="lemma">fill_context_bis</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">step_eq_refl</span></span> is an equivalence. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="step_eq_refl"><span class="id" type="lemma">step_eq_refl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>), <a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> [].<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="ContextEquality.html#context_bis_refl"><span class="id" type="lemma">context_bis_refl</span></a>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_refl"><span class="id" type="lemma">substitution_eq_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="step_eq_symm"><span class="id" type="lemma">step_eq_symm</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">o</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">o</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">p</span>, <span class="id" type="var">o</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="ContextEquality.html#context_bis_symm"><span class="id" type="lemma">context_bis_symm</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">_</span> [<span class="id" type="var">H</span> <span class="id" type="var">H'</span>]].<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_symm"><span class="id" type="lemma">substitution_eq_symm</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="step_eq_trans"><span class="id" type="lemma">step_eq_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">o</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">m</span> : <span class="id" type="var">w</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">z</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">o</span> <span class="id" type="var">m</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">m</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">p</span>, <span class="id" type="var">o</span>, <span class="id" type="var">m</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="ContextEquality.html#context_bis_trans"><span class="id" type="lemma">context_bis_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">c0</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">_</span> [<span class="id" type="var">H</span> <span class="id" type="var">H'</span>]].<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Substitution.html#substitution_eq_trans"><span class="id" type="lemma">substitution_eq_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">u</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Depth of rule application in a rewriting step. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="depth"><span class="id" type="definition">depth</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span> (<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>) : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">c</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Context.html#hole_depth"><span class="id" type="definition">hole_depth</span></a> <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Source and target terms are equal up to the depth of the rewrite step. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="eq_up_to_rewriting_depth"><span class="id" type="lemma">eq_up_to_rewriting_depth</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>) <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#depth"><span class="id" type="definition">depth</span></a> <span class="id" type="var">p</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">n</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">p</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">c</span> <span class="id" type="var">u</span> <span class="id" type="var">Hr</span> <span class="id" type="var">Hs</span> <span class="id" type="var">Ht</span>].<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">exact</span> (<a class="idref" href="TermEquality.html#term_eq_up_to_trans"><span class="id" type="lemma">term_eq_up_to_trans</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="TermEquality.html#term_eq_up_to_symm"><span class="id" type="lemma">term_eq_up_to_symm</span></a> ((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">Hs</span>) <span class="id" type="var">n</span>))<br/>
&nbsp;&nbsp;(<a class="idref" href="TermEquality.html#term_eq_up_to_trans"><span class="id" type="lemma">term_eq_up_to_trans</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Context.html#fill_eq_up_to"><span class="id" type="lemma">fill_eq_up_to</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <span class="id" type="var">r</span>)) <span class="id" type="var">H</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">Ht</span>) <span class="id" type="var">n</span>))).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A term is a normal form if no rule left-hand side matches. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="normal_form"><span class="id" type="definition">normal_form</span></a> <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">c</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#context"><span class="id" type="abbreviation">context</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">u</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.system"><span class="id" type="variable">system</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <span class="id" type="var">r</span>)) <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t</span>.<br/>

<br/>
</div>

<div class="doc">
An alternative formulation would be <span class="inlinecode">~<span class="id" type="var">exists</span> <span class="id" type="var">p</span> : <span class="id" type="var">t</span> [&gt;] <span class="id" type="var">_</span>, <span class="id" type="var">True</span></span>. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
The type <span class="inlinecode"><span class="id" type="var">s</span> -&gt;&gt; <span class="id" type="var">t</span></span> of rewrite sequences is parameterised by source and
   target terms <span class="inlinecode"><span class="id" type="var">s</span></span> and <span class="inlinecode"><span class="id" type="var">t</span></span>. This structure is based on that of the tree
   ordinals (see the <span class="inlinecode"><span class="id" type="var">Ordinal</span></span> library). 
</div>
<div class="code">

<br/>
<span class="id" type="var">Reserved Notation </span>"s -&gt;&gt; t" (<span class="id" type="var">no</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="keyword">Inductive</span> <a name="sequence"><span class="id" type="inductive">sequence</span></a> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> -&gt; <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> -&gt; <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a name="Nil"><span class="id" type="constructor">Nil</span></a>   : <span class="id" type="keyword">forall</span> <span class="id" type="var">t</span>, <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a name="Cons"><span class="id" type="constructor">Cons</span></a>  : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>), <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span><br/>
&nbsp;&nbsp;| <a name="Lim"><span class="id" type="constructor">Lim</span></a>   : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">f</span> : (<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">n</span>), <span class="id" type="var">c</span> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">t</span>), <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span><br/>
<span class="id" type="var">where </span><a name="TRS.::x_->>_x"><span class="id" type="notation">"</span></a>s -&gt;&gt; t" := (<a class="idref" href="Rewriting.html#sequence"><span class="id" type="inductive">sequence</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
Coq ignores the recursive call in the <span class="inlinecode"><span class="id" type="var">Lim</span></span> constructor and therefore
   the induction principle is missing a hypothesis. We reset the
   generated induction principle and create a new one below.

<br/> <br/>
   UPDATE: This was only true for our old <span class="inlinecode"><span class="id" type="var">Sigma</span></span> type definition, Coq
   generates a perfectly fine induction principle now. For the moment, we
   keep our own induction principle though, because the order of parameters
   is different (this affects all proofs with <span class="inlinecode"><span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [...]</span>). 
</div>
<div class="code">

<br/>
<span class="id" type="var">Reset</span> <span class="id" type="var">sequence_rect</span>.<br/>

<br/>
<span class="id" type="var">Notation </span><a name="TRS.::x_->>_x"><span class="id" type="notation">"</span></a>s -&gt;&gt; t" := (<a class="idref" href="Rewriting.html#sequence"><span class="id" type="inductive">sequence</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span>].<br/>

<br/>
<span class="id" type="keyword">Section</span> <a name="TRS.InductionPrinciple"><span class="id" type="section">InductionPrinciple</span></a>.<br/>

<br/>
<span class="id" type="keyword">Variable</span> <a name="TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>), <span class="id" type="keyword">Type</span>.<br/>

<br/>
<span class="id" type="keyword">Hypothesis</span> <a name="TRS.InductionPrinciple.H1"><span class="id" type="variable">H1</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">t</span>, <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> (<a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">t</span>).<br/>

<br/>
<span class="id" type="keyword">Hypothesis</span> <a name="TRS.InductionPrinciple.H2"><span class="id" type="variable">H2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span>).<br/>

<br/>
<span class="id" type="keyword">Hypothesis</span> <a name="TRS.InductionPrinciple.H3"><span class="id" type="variable">H3</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">f</span> : <span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">n</span>, <span class="id" type="var">c</span> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">t</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> (<a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">f</span> <span class="id" type="var">c</span>).<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="sequence_rect"><span class="id" type="definition">sequence_rect</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">r</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">return</span> <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.P"><span class="id" type="variable">P</span></a> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">t</span>          =&gt; <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.H1"><span class="id" type="variable">H1</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.H2"><span class="id" type="variable">H2</span></a> <span class="id" type="var">p</span> (<a class="idref" href="Rewriting.html#sequence_rect"><span class="id" type="definition">sequence_rect</span></a> <span class="id" type="var">r</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> =&gt; <a class="idref" href="Rewriting.html#TRS.InductionPrinciple.H3"><span class="id" type="variable">H3</span></a> <span class="id" type="var">f</span> <span class="id" type="var">c</span> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#sequence_rect"><span class="id" type="definition">sequence_rect</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>))<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="Rewriting.html#TRS.InductionPrinciple"><span class="id" type="section">InductionPrinciple</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="sequence_ind"><span class="id" type="definition">sequence_ind</span></a> (<span class="id" type="var">P</span> : `(<span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="keyword">Prop</span>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#sequence_rect"><span class="id" type="definition">sequence_rect</span></a> <span class="id" type="var">P</span>.<br/>

<br/>
</div>

<div class="doc">
We can <span class="inlinecode"><span class="id" type="var">Cons</span></span> steps that fit by bisimilarity. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="cons_term_bis"><span class="id" type="definition">cons_term_bis</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>) : <span class="id" type="var">u</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">p</span> <span class="id" type="keyword">in</span> <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span> <span class="id" type="keyword">return</span> <span class="id" type="var">u</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">rul</span> <span class="id" type="var">c</span> <span class="id" type="var">sub</span> <span class="id" type="var">Hr</span> <span class="id" type="var">Hs</span> <span class="id" type="var">Ht</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">fun</span> <span class="id" type="var">H</span> =&gt; <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> (<a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <span class="id" type="var">rul</span> <span class="id" type="var">c</span> <span class="id" type="var">sub</span> <span class="id" type="var">Hr</span> (<a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="var">Hs</span> <span class="id" type="var">H</span>) <span class="id" type="var">Ht</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Trivial image of rewrite sequences in ordinals. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="length"><span class="id" type="definition">length</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <a class="idref" href="Ordinal.html#ord"><span class="id" type="inductive">ord</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="Ordinal.html#Zero"><span class="id" type="constructor">Zero</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">r</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Ordinal.html#Succ"><span class="id" type="constructor">Succ</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  =&gt; <a class="idref" href="Ordinal.html#Limit"><span class="id" type="constructor">Limit</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>))<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
We lift <span class="inlinecode"><span class="id" type="var">pd_type</span></span>, <span class="inlinecode"><span class="id" type="var">pd</span></span>, and <span class="inlinecode"><span class="id" type="var">ord_le</span></span> from ordinals to rewrite sequences.
   See the <span class="inlinecode"><span class="id" type="var">Ordinal</span></span> library for the original definitions. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="pred_type"><span class="id" type="definition">pred_type</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">r</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" type="inductive">unit</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>) % <span class="id" type="var">type</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">{</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">:</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">&amp;</span></a> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">}</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="var">Reserved Notation </span>"r [ i ]" (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>

<br/>
</div>

<div class="doc">
The difference with ordinals is that <span class="inlinecode"><span class="id" type="var">Succ</span></span> constructors carry no
   additional information, whereas <span class="inlinecode"><span class="id" type="var">Cons</span></span> constructors carry a rewrite
   step. The predecessor indices of a rewrite sequence always point to
   a <span class="inlinecode"><span class="id" type="var">Cons</span></span> constructor and it is useful to get both the predecessor
   rewrite sequence and the rewrite step pointed to by the predecessor
   index. Therefore, <span class="inlinecode"><span class="id" type="var">pred</span></span> returns a pair (rewrite sequence, rewrite
   step). The pair is wrapped in a <span class="inlinecode"><span class="id" type="var">Sigma</span></span> type that includes the
   source and target terms of the rewrite step. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="pred"><span class="id" type="definition">pred</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> -&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">{</span></a> <span class="id" type="var">ts</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">:</span></a> (<a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>)%<span class="id" type="var">type</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">&amp;</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a>)%<span class="id" type="var">type</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">}</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">in</span> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> <span class="id" type="keyword">return</span> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> -&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">{</span></a> <span class="id" type="var">ts</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">:</span></a> (<a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>)%<span class="id" type="var">type</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">&amp;</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">ts</span><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a>)%<span class="id" type="var">type</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#:type_scope:{_x_:_x_&_x_}"><span class="id" type="notation">}</span></a> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>           =&gt; <a class="idref" href="Prelims.html#::!"><span class="id" type="notation">!</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t'</span> <span class="id" type="var">q</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">ts</span> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> <span class="id" type="var">ts</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> <span class="id" type="var">ts</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:type_scope:x_*_x"><span class="id" type="notation">)</span></a>)%<span class="id" type="var">type</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">(</span></a><span class="id" type="var">t'</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">,</span></a> <span class="id" type="var">u</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">,</span></a> <span class="id" type="var">p</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:core_scope:(_x_,_x_,_.._,_x_)"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">j</span>  =&gt; <span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>   =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">n</span> <span class="id" type="var">j</span> =&gt; <a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">(</span></a><span class="id" type="var">f</span> <span class="id" type="var">n</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">)[</span></a><span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
<span class="id" type="var">where </span><a name="TRS.::x_[_x_]"><span class="id" type="notation">"</span></a>r [ i ]" := (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>).<br/>

<br/>
<span class="id" type="var">Notation </span><a name="TRS.::x_[1_x_]"><span class="id" type="notation">"</span></a>r [1 i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT1"><span class="id" type="definition">projT1</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="TRS.::x_[2_x_]"><span class="id" type="notation">"</span></a>r [2 i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT1"><span class="id" type="definition">projT1</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="TRS.::x_[seq_x_]"><span class="id" type="notation">"</span></a>r [seq i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="TRS.::x_[stp_x_]"><span class="id" type="notation">"</span></a>r [stp i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">pred_type</span></span> is transitively closed. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="pred_trans"><span class="id" type="lemma">pred_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>, <span class="id" type="var">j</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">k</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">[</span></a><span class="id" type="var">k</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span>; <span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">j</span> |- *.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">j</span>).<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">destruct</span> (<span class="id" type="var">IHr</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">k</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">k</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">j</span> |- *.<br/>
<span class="id" type="tactic">destruct</span> (<span class="id" type="var">H</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">k</span> <span class="id" type="var">H1</span>].<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="var">n</span> <span class="id" type="var">k</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#pred_trans"><span class="id" type="lemma">pred_trans</span></a> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span>].<br/>

<br/>
</div>

<div class="doc">
Image of <span class="inlinecode"><span class="id" type="var">pred_type</span></span> (on rewrite sequences) in <span class="inlinecode"><span class="id" type="var">pd_type</span></span> (on ordinals).
   Maybe we should make this a coercion. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> -&gt; <a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">in</span> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> <span class="id" type="keyword">return</span> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> -&gt; <a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="Prelims.html#::!"><span class="id" type="notation">!</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">j</span>  =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> (<a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> <span class="id" type="var">q</span> <span class="id" type="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">n</span> <span class="id" type="var">j</span> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">_</span> <span class="id" type="var">n</span> (<a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>) <span class="id" type="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span>].<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pred_type_as_pd_type_ok"><span class="id" type="lemma">pred_type_as_pd_type_ok</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> (<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Ordinal.html#pd"><span class="id" type="definition">pd</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) (<a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> <span class="id" type="var">i</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span>| <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Image of <span class="inlinecode"><span class="id" type="var">pd_type</span></span> (on ordinals) in <span class="inlinecode"><span class="id" type="var">pred_type</span></span> (on rewrite sequences).
   Maybe we should make this a coercion. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) -&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">in</span> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> <span class="id" type="keyword">return</span> <a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) -&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="Prelims.html#::!"><span class="id" type="notation">!</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">j</span>  =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> (<a class="idref" href="Rewriting.html#pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> <span class="id" type="var">q</span> <span class="id" type="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">i</span> =&gt; <span class="id" type="keyword">match</span> <span class="id" type="var">i</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">n</span> <span class="id" type="var">j</span> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> <span class="id" type="var">_</span> <span class="id" type="var">n</span> (<a class="idref" href="Rewriting.html#pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>) <span class="id" type="var">j</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> [<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span>].<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pd_type_as_pred_type_ok"><span class="id" type="lemma">pd_type_as_pred_type_ok</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">i</span> : <a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> (<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <a class="idref" href="Rewriting.html#pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> (<a class="idref" href="Ordinal.html#:ord_scope:x_[_x_]"><span class="id" type="notation">(</span></a><a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span><a class="idref" href="Ordinal.html#:ord_scope:x_[_x_]"><span class="id" type="notation">)[</span></a><span class="id" type="var">i</span><a class="idref" href="Ordinal.html#:ord_scope:x_[_x_]"><span class="id" type="notation">]</span></a>)%<span class="id" type="var">ord</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span>| <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pd_type_pred_type_inv"><span class="id" type="lemma">pd_type_pred_type_inv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Rewriting.html#pd_type_as_pred_type"><span class="id" type="definition">pd_type_as_pred_type</span></a> (<a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> <span class="id" type="var">i</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span>| <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span>; [| <span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IH</span> <span class="id" type="var">i</span>)]; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- (<span class="id" type="var">IH</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span>).<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The order <span class="inlinecode"><span class="id" type="var">ord_le</span></span> on ordinals lifted to rewrite sequences is an embedding
   relation on rewrite sequences. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="embed"><span class="id" type="inductive">embed</span></a> : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>), <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a name="Embed_Nil"><span class="id" type="constructor">Embed_Nil</span></a>  : <span class="id" type="keyword">forall</span> <span class="id" type="var">s</span> `(<span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a name="Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a><a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">)</span></a>, <span class="id" type="var">p</span> : <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">(</span></a><span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a><a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> (<span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">stp</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">]</span></a>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a name="Embed_Lim"><span class="id" type="constructor">Embed_Lim</span></a>  : <span class="id" type="keyword">forall</span> `(<span class="id" type="var">f</span> : (<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">n</span>), <span class="id" type="var">c</span> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">(</span></a><span class="id" type="var">f</span> <span class="id" type="var">n</span><a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">)</span></a> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">f</span> <span class="id" type="var">c</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><br/>
<span class="id" type="var">where </span><a name="TRS.::x_<=_x"><span class="id" type="notation">"</span></a>r &lt;= q" := (<a class="idref" href="Rewriting.html#embed"><span class="id" type="inductive">embed</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>).<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="embed_strict"><span class="id" type="definition">embed_strict</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>) := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">i</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="var">Infix </span><a name="TRS.::x_<_x"><span class="id" type="notation">"</span></a> &lt; " := <a class="idref" href="Rewriting.html#embed_strict"><span class="id" type="definition">embed_strict</span></a> (<span class="id" type="var">no</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 70).<br/>

<br/>

<br/>
</div>

<div class="doc">
Some lemmas on rewrite sequences and relations follow. Most of them are
   analoguous to lemmas on ordinals that can be found in the <span class="inlinecode"><span class="id" type="var">Ordinal</span></span>
   library. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_length"><span class="id" type="lemma">embed_length</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt; (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span> <a class="idref" href="Ordinal.html#:ord_scope:x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">q</span>)%<span class="id" type="var">ord</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#Ord_le_Succ"><span class="id" type="constructor">Ord_le_Succ</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="Rewriting.html#pred_type_as_pd_type"><span class="id" type="definition">pred_type_as_pd_type</span></a> <span class="id" type="var">i</span>).<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="Rewriting.html#pred_type_as_pd_type_ok"><span class="id" type="lemma">pred_type_as_pd_type_ok</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">q</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="Rewriting.html#pred_trans"><span class="id" type="lemma">pred_trans</span></a> <span class="id" type="var">i</span> <span class="id" type="var">i0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">k</span> <span class="id" type="var">T</span>].<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> <span class="id" type="var">H</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">T</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> <span class="id" type="var">H</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_pred_left"><span class="id" type="lemma">embed_pred_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> | <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">s</span> <span class="id" type="var">j</span> <span class="id" type="var">r</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span> <span class="id" type="var">IH</span> <span class="id" type="var">Hp</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_not_cons_nil"><span class="id" type="lemma">embed_not_cons_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>) <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">v</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">v</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_cons_elim"><span class="id" type="lemma">embed_cons_elim</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">w</span>, <span class="id" type="var">o</span> : <span class="id" type="var">v</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">x</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">x</span> <span class="id" type="var">o</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] |]; [| <span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">p0</span>]; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="first_pred_after_cons_id"><span class="id" type="lemma">first_pred_after_cons_id</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">(</span></a><a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">)[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">)]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_cons_left"><span class="id" type="lemma">embed_cons_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">v</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">w</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">w</span> <span class="id" type="var">q</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Rewriting.html#first_pred_after_cons_id"><span class="id" type="lemma">first_pred_after_cons_id</span></a> <span class="id" type="var">r</span>) <span class="id" type="keyword">with</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#embed_pred_left"><span class="id" type="lemma">embed_pred_left</span></a> <span class="id" type="var">s</span> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span>) <span class="id" type="var">v</span> <span class="id" type="var">w</span> <span class="id" type="var">q</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>)).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">p</span> : <span class="id" type="var">v</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">w</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">z</span> <span class="id" type="var">o</span> <span class="id" type="var">_</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="var">u</span> <span class="id" type="var">w</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">p</span>) <span class="id" type="var">s</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">i</span>) <span class="id" type="var">r</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_cons_intro"><span class="id" type="lemma">embed_cons_intro</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">o</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">w</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#step_eq"><span class="id" type="definition">step_eq</span></a> <span class="id" type="var">p</span> <span class="id" type="var">o</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">o</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="var">u</span> <span class="id" type="var">w</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">o</span>) <span class="id" type="var">s</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>) <span class="id" type="var">r</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">f</span> : (<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">n</span>), <span class="id" type="var">c</span> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> <span class="id" type="var">ts</span> <span class="id" type="var">v</span>) <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">f</span> <span class="id" type="var">n</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">f</span> <span class="id" type="var">c</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">_</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">ts'</span> <span class="id" type="var">g</span> <span class="id" type="var">v</span> <span class="id" type="var">c'</span> <span class="id" type="var">n</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="var">u</span> <span class="id" type="var">v</span> (<a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">g</span> <span class="id" type="var">c'</span>) <span class="id" type="var">s</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">g</span> <span class="id" type="var">n</span>)) <span class="id" type="var">n</span> <span class="id" type="var">i</span>) <span class="id" type="var">r</span>); <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">m</span>.<br/>
<span class="id" type="tactic">apply</span> (<span class="id" type="var">IH</span> <span class="id" type="var">m</span> <span class="id" type="var">u</span> <span class="id" type="var">ts'</span> <span class="id" type="var">g</span> <span class="id" type="var">v</span> <span class="id" type="var">c'</span> <span class="id" type="var">n</span>).<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_refl"><span class="id" type="lemma">embed_refl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>), <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">q</span> := <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span>) (<span class="id" type="var">i</span> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#step_eq_refl"><span class="id" type="lemma">step_eq_refl</span></a>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_trans"><span class="id" type="lemma">embed_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">x</span> : <span class="id" type="var">w</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">z</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> | <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">s</span> <span class="id" type="var">i</span> <span class="id" type="var">r</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span> <span class="id" type="var">IH</span> <span class="id" type="var">Hp</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">H2</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> | <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">u</span> <span class="id" type="var">j</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">o</span> <span class="id" type="var">H'</span> <span class="id" type="var">IH'</span> <span class="id" type="var">Ho</span> | <span class="id" type="var">u</span> <span class="id" type="var">ts'</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c'</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">H'</span> <span class="id" type="var">IH'</span>].<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i'</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> * |- *.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#step_eq_trans"><span class="id" type="lemma">step_eq_trans</span></a> <span class="id" type="keyword">with</span> (<span class="id" type="var">x</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a>) <span class="id" type="var">v</span> <span class="id" type="var">o</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH'</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> * |- *.<br/>
<span class="id" type="tactic">apply</span> (<span class="id" type="var">IH'</span> <span class="id" type="var">n</span> <span class="id" type="var">i</span> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span> <span class="id" type="var">Hp</span> <span class="id" type="var">IH</span>).<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">exact</span> (<span class="id" type="var">IH</span> <span class="id" type="var">n</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">H2</span>).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma is surprisingly hard to prove directly due to complexities
   with dependent types. Fortunately we can use our results on ordinals with
   the length of rewrite sequences to make a shortcut. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="embed_not_cons"><span class="id" type="lemma">embed_not_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H1</span> := <a class="idref" href="Rewriting.html#embed_length"><span class="id" type="lemma">embed_length</span></a> <span class="id" type="var">H</span>).<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#ord_le_not_succ"><span class="id" type="lemma">ord_le_not_succ</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_not_pred_right_strong"><span class="id" type="lemma">embed_not_pred_right_strong</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">apply</span> (<a class="idref" href="Rewriting.html#embed_not_cons"><span class="id" type="lemma">embed_not_cons</span></a> (<a class="idref" href="Rewriting.html#embed_trans"><span class="id" type="lemma">embed_trans</span></a> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>)).<br/>
<span class="id" type="tactic">exact</span> (<span class="id" type="var">IH</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span> (<a class="idref" href="Rewriting.html#embed_cons_left"><span class="id" type="lemma">embed_cons_left</span></a> <span class="id" type="var">H1</span>) <span class="id" type="var">H2</span>).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">exact</span> (<span class="id" type="var">IH</span> <span class="id" type="var">n</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span> (<span class="id" type="var">H</span> <span class="id" type="var">n</span>) <span class="id" type="var">H2</span>).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_not_pred_right"><span class="id" type="lemma">embed_not_pred_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_not_pred_right_strong"><span class="id" type="lemma">embed_not_pred_right_strong</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_refl"><span class="id" type="lemma">embed_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_strict_cons_right"><span class="id" type="lemma">embed_strict_cons_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">p</span> : <span class="id" type="var">v</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">w</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">q</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">destruct</span> 1 <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">q</span>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_strict_embed"><span class="id" type="lemma">embed_strict_embed</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="tactic">destruct</span> 1 <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_strict_trans"><span class="id" type="lemma">embed_strict_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">x</span> : <span class="id" type="var">w</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">z</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">x</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="tactic">destruct</span> 1 <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">Hi</span>].<br/>
<span class="id" type="tactic">destruct</span> 1 <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">Hj</span>].<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_trans"><span class="id" type="lemma">embed_trans</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span>; [<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span> |]; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Well-formed rewrite sequences have limit functions <span class="inlinecode"><span class="id" type="var">f</span></span> where <span class="inlinecode"><span class="id" type="var">n</span> &lt; <span class="id" type="var">m</span></span>
   implies that <span class="inlinecode"><span class="id" type="var">f</span> <span class="id" type="var">n</span></span> is strictly embedded in <span class="inlinecode"><span class="id" type="var">f</span> <span class="id" type="var">m</span></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <span class="id" type="keyword">wf</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> (<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <span class="id" type="keyword">wf</span> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <span class="id" type="keyword">wf</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span>, (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">m</span>)%<span class="id" type="var">nat</span> -&gt; <span class="id" type="var">f</span> <span class="id" type="var">n</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">f</span> <span class="id" type="var">m</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The following convergence definitions are not at all useful. It is
   unclear whether there exist more natural translations of convergence
   to our representation of rewrite sequences. We define some lemmas on
   these definitions below, but have not been able to really work with
   them. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Weakly convergent sequences have limit functions <span class="inlinecode"><span class="id" type="var">f</span></span> where for
   any depth <span class="inlinecode"><span class="id" type="var">d</span></span>, from some <span class="inlinecode"><span class="id" type="var">n</span></span>, the end term of <span class="inlinecode"><span class="id" type="var">r</span></span> is equal up to
   depth <span class="inlinecode"><span class="id" type="var">d</span></span> where <span class="inlinecode"><span class="id" type="var">f</span> <span class="id" type="var">n</span> &lt;= <span class="id" type="var">r</span></span> and <span class="inlinecode"><span class="id" type="var">r</span></span> is contained in the limit. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">_</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">d</span>, <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a> <span class="id" type="keyword">forall</span> <span class="id" type="var">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">n</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> (<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a>) <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Strongly convergent sequences have limit functions <span class="inlinecode"><span class="id" type="var">f</span></span> where for
   any depth <span class="inlinecode"><span class="id" type="var">d</span></span>, from some <span class="inlinecode"><span class="id" type="var">n</span></span>, the step after <span class="inlinecode"><span class="id" type="var">r</span></span> is below depth
   <span class="inlinecode"><span class="id" type="var">d</span></span> where <span class="inlinecode"><span class="id" type="var">f</span> <span class="id" type="var">n</span> &lt;= <span class="id" type="var">r</span></span> and <span class="inlinecode"><span class="id" type="var">r</span></span> is contained in the limit. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="strongly_convergent"><span class="id" type="definition">strongly_convergent</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> <span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Rewriting.html#strongly_convergent"><span class="id" type="definition">strongly_convergent</span></a> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">_</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#strongly_convergent"><span class="id" type="definition">strongly_convergent</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">d</span>, <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a> <span class="id" type="keyword">forall</span> <span class="id" type="var">j</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">f</span> <span class="id" type="var">n</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Rewriting.html#depth"><span class="id" type="definition">depth</span></a> (<span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">stp</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">]</span></a>) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_>_x"><span class="id" type="notation">&gt;</span></a> <span class="id" type="var">d</span>)%<span class="id" type="var">nat</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
We should probably be able to prove that <span class="inlinecode"><span class="id" type="var">weakly_converent</span></span> implies
   <span class="inlinecode"><span class="id" type="var">strongly_converent</span></span>. Note that this is not true in the traditional
   theory of infinitary rewriting, the relevant difference is that we
   have a condition in the definition of rewrite sequences. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> <span class="id" type="var">d</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) <span class="id" type="var">u</span> : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">s</span>          =&gt; <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">s</span> <span class="id" type="var">u</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">t</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Rewriting.html#all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">q</span> <span class="id" type="var">u</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">_</span>  =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> <span class="id" type="var">d</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>) <span class="id" type="var">u</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="all_terms_eq_up_to_0"><span class="id" type="lemma">all_terms_eq_up_to_0</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">u</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> 0 <span class="id" type="var">r</span> <span class="id" type="var">u</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Predicate saying that a rewrite sequence is finite. This is useful to
   prove certain properties via a shortcut.

<br/> <br/>
   Maybe it's cleaner to define this via the length of the rewrite
   sequence? 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="finite"><span class="id" type="definition">finite</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">q</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span>  =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Finite rewrite sequences are well-formed. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="wf_finite"><span class="id" type="lemma">wf_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Finite rewrite sequences are weakly convergent. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="weakly_convergent_finite"><span class="id" type="lemma">weakly_convergent_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> <span class="id" type="var">r</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">snoc</span></span> prepends (not appends) a rewrite step to a rewrite sequence. It
   is analoguous to 1 + alpha on ordinals.

<br/> <br/>
   We define <span class="inlinecode"><span class="id" type="var">snoc</span></span> via an auxiliary function <span class="inlinecode"><span class="id" type="var">snoc_rec</span></span> to escape some
   type-checker problems (due to <span class="inlinecode"><span class="id" type="var">snoc</span></span> being recursive in its right
   argument). 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="snoc_rec"><span class="id" type="definition">snoc_rec</span></a> (<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>) (<span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">in</span> <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> <span class="id" type="keyword">return</span> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">s</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">o</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#snoc_rec"><span class="id" type="definition">snoc_rec</span></a> <span class="id" type="var">q</span> <span class="id" type="var">p</span>) <span class="id" type="var">o</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span>  =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">p</span> =&gt; <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">o</span> =&gt; <a class="idref" href="Rewriting.html#snoc_rec"><span class="id" type="definition">snoc_rec</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">o</span>) <span class="id" type="var">p</span>) <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="snoc"><span class="id" type="definition">snoc</span></a> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> := <a class="idref" href="Rewriting.html#snoc_rec"><span class="id" type="definition">snoc_rec</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="all_terms_eq_up_to_snoc"><span class="id" type="lemma">all_terms_eq_up_to_snoc</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">d</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">v</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">s</span> <span class="id" type="var">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> <span class="id" type="var">d</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#all_terms_eq_up_to"><span class="id" type="definition">all_terms_eq_up_to</span></a> <span class="id" type="var">d</span> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>) <span class="id" type="var">v</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">v</span> <span class="id" type="var">Hs</span> <span class="id" type="var">Hr</span>.<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">Hr</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">Hr</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">Hr</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">Hr</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_snoc_right"><span class="id" type="lemma">embed_snoc_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">p</span> : <span class="id" type="var">u</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">s</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> | <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">s</span> <span class="id" type="var">ts</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intros</span> <span class="id" type="var">u</span> <span class="id" type="var">p</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_intro"><span class="id" type="lemma">embed_cons_intro</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#step_eq_refl"><span class="id" type="lemma">step_eq_refl</span></a>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_embed"><span class="id" type="lemma">snoc_embed</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
This is a very ad-hoc and hairy proof. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">t</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_refl"><span class="id" type="lemma">embed_refl</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> 0; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span> |- *.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">w</span> | <span class="id" type="var">w</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">z</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">w</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">change</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>) (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>) <span class="id" type="var">p0</span> <a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">stp</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">]</span></a>) <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>) <span class="id" type="var">o</span>).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="var">s</span> <span class="id" type="var">z</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>) <span class="id" type="var">o</span>) <span class="id" type="var">s</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>) (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>)).<br/>
<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHembed</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>. <span class="id" type="var">fold</span> (@<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">t</span> <span class="id" type="var">v</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">r</span>. <span class="id" type="var">fold</span> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_embed_strict"><span class="id" type="lemma">snoc_embed_strict</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">embed_strict</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">t</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">_</span> | <span class="id" type="var">t</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>); <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#snoc_embed"><span class="id" type="lemma">snoc_embed</span></a>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">fold</span> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>))) <span class="id" type="var">n</span> <span class="id" type="var">j</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_not_snoc_nil"><span class="id" type="lemma">embed_not_snoc_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) <span class="id" type="var">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">v</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">v</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> 0.<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_snoc_elim"><span class="id" type="lemma">embed_snoc_elim</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | []].<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_not_snoc_nil"><span class="id" type="lemma">embed_not_snoc_nil</span></a>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> * |- *.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_intro"><span class="id" type="lemma">embed_cons_intro</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">fold</span> <a class="idref" href="Rewriting.html#snoc_rec"><span class="id" type="definition">snoc_rec</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHq</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">apply</span> <span class="id" type="var">H1</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_finite"><span class="id" type="lemma">snoc_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_wf"><span class="id" type="lemma">snoc_wf</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">v</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">intros</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>].<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#snoc_embed_strict"><span class="id" type="lemma">snoc_embed_strict</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_weakly_convergent_helper"><span class="id" type="lemma">snoc_weakly_convergent_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">d</span> <span class="id" type="var">x</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>, <span class="id" type="var">j</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">q</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">(</span></a><a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> (<span class="id" type="var">q</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a>) <span class="id" type="var">x</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">d</span> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">[1</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[1_x_]"><span class="id" type="notation">]</span></a>) <span class="id" type="var">x</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">v</span> | <span class="id" type="var">t</span> <span class="id" type="var">v</span> <span class="id" type="var">q</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">j</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">j</span> <span class="id" type="keyword">as</span> [[] | []].<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_not_snoc_nil"><span class="id" type="lemma">embed_not_snoc_nil</span></a>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">j</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">j</span>].<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>). <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_snoc_elim"><span class="id" type="lemma">embed_snoc_elim</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H1</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">i</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">j</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">j</span>].<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span> <span class="id" type="var">p</span> <span class="id" type="var">r</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H1</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="var">n</span> <span class="id" type="var">i</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="snoc_weakly_convergent"><span class="id" type="lemma">snoc_weakly_convergent</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#weakly_convergent"><span class="id" type="definition">weakly_convergent</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> <span class="id" type="var">u</span> <span class="id" type="var">r</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHr</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">_</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">intros</span> [<span class="id" type="var">m</span> <span class="id" type="var">j</span>] <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="Rewriting.html#snoc_weakly_convergent_helper"><span class="id" type="lemma">snoc_weakly_convergent_helper</span></a> <span class="id" type="var">d</span> <span class="id" type="var">t</span> <span class="id" type="var">p</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>) (<span class="id" type="var">f</span> <span class="id" type="var">m</span>) <span class="id" type="var">j</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">M</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="var">m</span> <span class="id" type="var">i</span>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">M</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">M</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">append</span></span> concatenates two rewrite sequences. Like <span class="inlinecode"><span class="id" type="var">snoc</span></span>, it is recursive
   in its right argument and defined via a <span class="inlinecode"><span class="id" type="var">append_rec</span></span> helper function. It
   is the analogue of <span class="inlinecode"><span class="id" type="var">add</span></span> on ordinals. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="append_rec"><span class="id" type="definition">append_rec</span></a> (<span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> : <a class="idref" href="Rewriting.html#term"><span class="id" type="abbreviation">term</span></a>) (<span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">q</span> <span class="id" type="keyword">in</span> <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> <span class="id" type="keyword">return</span> <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span> -&gt; <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">t0</span>         =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">r</span> =&gt; <span class="id" type="var">r</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">p</span> =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">r</span> =&gt; <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#append_rec"><span class="id" type="definition">append_rec</span></a> <span class="id" type="var">q</span> <span class="id" type="var">r</span>) <span class="id" type="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span>  =&gt; <span class="id" type="keyword">fun</span> <span class="id" type="var">r</span> =&gt; <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">o</span> =&gt; <a class="idref" href="Rewriting.html#append_rec"><span class="id" type="definition">append_rec</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">o</span>) <span class="id" type="var">r</span>) <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="append"><span class="id" type="definition">append</span></a> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span> := <a class="idref" href="Rewriting.html#append_rec"><span class="id" type="definition">append_rec</span></a> <span class="id" type="var">q</span> <span class="id" type="var">r</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_length"><span class="id" type="lemma">append_length</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>) <a class="idref" href="Ordinal.html#:ord_scope:x_==_x"><span class="id" type="notation">==</span></a> <a class="idref" href="Ordinal.html#add"><span class="id" type="definition">add</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">q</span>)) % <span class="id" type="var">ord</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#ord_eq_refl"><span class="id" type="lemma">ord_eq_refl</span></a>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#Ord_le_Succ"><span class="id" type="constructor">Ord_le_Succ</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Ordinal.html#add"><span class="id" type="definition">add</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">r</span>) (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> <span class="id" type="var">q</span>))) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">apply</span> (<span class="id" type="var">IH</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#Ord_le_Succ"><span class="id" type="constructor">Ord_le_Succ</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> (<a class="idref" href="Ordinal.html#pd_type"><span class="id" type="definition">pd_type</span></a> (<a class="idref" href="Rewriting.html#length"><span class="id" type="definition">length</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>))) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">apply</span> (<span class="id" type="var">IH</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="var">constructor</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">apply</span> <a class="idref" href="Ordinal.html#ord_le_limit_right"><span class="id" type="lemma">ord_le_limit_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">apply</span> (<span class="id" type="var">IH</span> <span class="id" type="var">n</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_append_right"><span class="id" type="lemma">embed_append_right</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">r</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_refl"><span class="id" type="lemma">embed_refl</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> 0.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_embed"><span class="id" type="lemma">append_embed</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">z</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">z</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
So this proof is a verbatim copy of <span class="inlinecode"><span class="id" type="var">snoc_embed</span></span> an thus is also quite
   hairy and ad-hoc.
   There should be a way to at least not repeat ourselves here. The same
   goes for <span class="inlinecode"><span class="id" type="var">snoc_embed_strict</span></span> and <span class="inlinecode"><span class="id" type="var">append_embed_strict</span></span> by the way. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">z</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">z</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">t</span> <span class="id" type="var">v</span> <span class="id" type="var">z</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_refl"><span class="id" type="lemma">embed_refl</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> 0; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span> |- *.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">z</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">w</span> | <span class="id" type="var">w</span> <span class="id" type="var">v</span> <span class="id" type="var">z</span> <span class="id" type="var">x</span> <span class="id" type="var">o</span> <span class="id" type="var">IH</span> | <span class="id" type="var">w</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">change</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">r0</span>) (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">z</span>) <span class="id" type="var">p</span> <a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">stp</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a><a class="idref" href="Rewriting.html#TRS.::x_[stp_x_]"><span class="id" type="notation">]</span></a>) <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">z</span>) <span class="id" type="var">o</span>).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="Rewriting.html#Embed_Cons"><span class="id" type="constructor">Embed_Cons</span></a> <span class="id" type="var">s</span> <span class="id" type="var">x</span> (<a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">z</span>) <span class="id" type="var">o</span>) <span class="id" type="var">s</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>) (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">r0</span>)).<br/>
<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHembed</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IH</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>. <span class="id" type="var">fold</span> (@<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">t</span> <span class="id" type="var">v</span>) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_cons_right"><span class="id" type="lemma">embed_cons_right</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_lim_right"><span class="id" type="lemma">embed_lim_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">simpl</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHembed</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>. <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">r</span>. <span class="id" type="var">fold</span> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_embed_strict"><span class="id" type="lemma">append_embed_strict</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">z</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<_x"><span class="id" type="notation">&lt;</span></a> <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">z</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">r</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">z</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">embed_strict</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">i</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">z</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">t</span> | <span class="id" type="var">t</span> <span class="id" type="var">v</span> <span class="id" type="var">z</span> <span class="id" type="var">w</span> <span class="id" type="var">o</span> <span class="id" type="var">_</span> | <span class="id" type="var">t</span> <span class="id" type="var">vs</span> <span class="id" type="var">f</span> <span class="id" type="var">v</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>); <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#append_embed"><span class="id" type="lemma">append_embed</span></a>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [[] | <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_pred_right"><span class="id" type="lemma">embed_pred_right</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">n</span> <span class="id" type="var">i</span>]; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="var">fold</span> (<a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>)) <span class="id" type="keyword">in</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span> <span class="id" type="var">r</span> <span class="id" type="var">q</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">IH</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">IH</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>))) <span class="id" type="var">n</span> <span class="id" type="var">j</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_finite"><span class="id" type="lemma">append_finite</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_wf"><span class="id" type="lemma">append_wf</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">trivial</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">G</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>].<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#append_embed_strict"><span class="id" type="lemma">append_embed_strict</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="pred_append"><span class="id" type="lemma">pred_append</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">i</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">j</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>)<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">[</span></a><span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">[</span></a><span class="id" type="var">i</span><a class="idref" href="Rewriting.html#TRS.::x_[_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">u</span> | <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">q</span> <span class="id" type="var">v</span> <span class="id" type="var">p</span> <span class="id" type="var">IH</span> | <span class="id" type="var">t</span> <span class="id" type="var">us</span> <span class="id" type="var">f</span> <span class="id" type="var">u</span> <span class="id" type="var">c</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">destruct</span> (<span class="id" type="var">IH</span> <span class="id" type="var">r</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inr"><span class="id" type="constructor">inr</span></a> <span class="id" type="var">_</span> <span class="id" type="var">j</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">destruct</span> (<span class="id" type="var">IH</span> 0 <span class="id" type="var">r</span> <span class="id" type="var">i</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">H</span>].<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#existT"><span class="id" type="constructor">existT</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> (<span class="id" type="var">f</span> <span class="id" type="var">n</span>))) 0 <span class="id" type="var">j</span>).<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_not_append_pred_left"><span class="id" type="lemma">embed_not_append_pred_left</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> `(<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>, <span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>, <span class="id" type="var">j</span> : <a class="idref" href="Rewriting.html#pred_type"><span class="id" type="definition">pred_type</span></a> <span class="id" type="var">r</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span> <a class="idref" href="Rewriting.html#TRS.::x_<=_x"><span class="id" type="notation">&lt;=</span></a> <span class="id" type="var">r</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">[</span></a><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">seq</span></a> <span class="id" type="var">j</span><a class="idref" href="Rewriting.html#TRS.::x_[seq_x_]"><span class="id" type="notation">]</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">q</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">i</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_not_pred_right"><span class="id" type="lemma">embed_not_pred_right</span></a>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="Rewriting.html#pred_trans"><span class="id" type="lemma">pred_trans</span></a> <span class="id" type="var">i</span> <span class="id" type="var">i0</span>) <span class="id" type="keyword">as</span> [<span class="id" type="var">j</span> <span class="id" type="var">H2</span>].<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IHq</span> <span class="id" type="keyword">with</span> <span class="id" type="var">r</span> <span class="id" type="var">j</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHq</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">H0</span> <span class="id" type="keyword">with</span> 0.<br/>
<span class="id" type="var">contradict</span> <span class="id" type="var">H0</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The infinitary unique normal forms property (UN-inf).

<br/> <br/>
   Note that this defines uniqueness of normal forms with respect to
   rewriting, not the more general unique normal forms property. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="unique_normal_forms"><span class="id" type="definition">unique_normal_forms</span></a> : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> <span class="id" type="var">v</span> (<span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>) (<span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="Rewriting.html#TRS.::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">v</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#normal_form"><span class="id" type="definition">normal_form</span></a> <span class="id" type="var">u</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#normal_form"><span class="id" type="definition">normal_form</span></a> <span class="id" type="var">v</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">u</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">v</span>.<br/>

<br/>
<span class="id" type="keyword">End</span> <a class="idref" href="Rewriting.html#TRS"><span class="id" type="section">TRS</span></a>.<br/>

<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#normal_form"><span class="id" type="definition">normal_form</span></a> [<span class="id" type="var">F</span> <span class="id" type="var">X</span>].<br/>
<span class="id" type="keyword">Implicit Arguments</span> <a class="idref" href="Rewriting.html#critical_pair"><span class="id" type="definition">critical_pair</span></a> [<span class="id" type="var">F</span> <span class="id" type="var">X</span>].<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>