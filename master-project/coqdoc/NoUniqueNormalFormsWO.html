<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<link href="coqdoc.css" rel="stylesheet" type="text/css"/>
<title>NoUniqueNormalFormsWO</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library NoUniqueNormalFormsWO</h1>

<div class="code">

<br/>
</div>

<div class="doc">
This library proofs that uniqueness of normal forms (UN) is not implied
   by weak orthogonality (WO) by counterexample. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="Rewriting.html#"><span class="id" type="library">Rewriting</span></a>.<br/>
<span class="id" type="keyword">Require</span> <span class="id" type="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Program.Equality.html#"><span class="id" type="library">Equality</span></a>.<br/>

<br/>
<span class="id" type="keyword">Set</span> <span class="id" type="keyword">Implicit</span> <span class="id" type="var">Arguments</span>.<br/>

<br/>
</div>

<div class="doc">
We construct the weakly orthogonal TRS with rules
<ul>
<li> PS : P(S(x)) -&gt; x

</li>
<li> SP : S(P(x)) -&gt; x

</li>
</ul>
    and show it is a counterexample to UN-inf.

<br/> <br/>
    J. Endrullis, C. Grabmayer, D. Hendriks, J.W. Klop and V. van Oostrom.
    Unique Normal Forms in Infinitary Weakly Orthogonal Rewriting.
    Rewriting Techniques and Applications, 2010.

<br/> <br/>
    Because we have <span class="inlinecode"><span class="id" type="var">S</span></span> as constructor for <span class="inlinecode"><span class="id" type="var">nat</span></span>, we rename the function
    symbols to D and U ('up' and 'down').

<br/> <br/>
    Let psi = U D D U U U D D D D... We show that
<ul>
<li> this TRS is weakly orthogonal

</li>
<li> psi rewrites to DDD...

</li>
<li> psi rewrites to UUU...

</li>
<li> DDD... is a normal form

</li>
<li> UUU... is a normal form

</li>
<li> DDD... and UUU... are not bisimilar

</li>
</ul>
    Together this gives a counterexample to (WO =&gt; UN). 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab13"></a><h1 class="section">Signature</h1>


<br/> <br/>
   We have two unary function symbols <span class="inlinecode"><span class="id" type="var">D</span></span> and <span class="inlinecode"><span class="id" type="var">U</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Inductive</span> <a name="symbol"><span class="id" type="inductive">symbol</span></a> : <span class="id" type="keyword">Set</span> := <a name="D"><span class="id" type="constructor">D</span></a> | <a name="U"><span class="id" type="constructor">U</span></a>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="beq_symb"><span class="id" type="definition">beq_symb</span></a> (<span class="id" type="var">f</span> <span class="id" type="var">g</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#symbol"><span class="id" type="inductive">symbol</span></a>) : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">f</span>, <span class="id" type="var">g</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a>, <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a>, <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" type="var">_</span>, <span class="id" type="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a><br/>
<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="beq_symb_ok"><span class="id" type="lemma">beq_symb_ok</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>, <a class="idref" href="NoUniqueNormalFormsWO.html#beq_symb"><span class="id" type="definition">beq_symb</span></a> <span class="id" type="var">f</span> <span class="id" type="var">g</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_<->_x"><span class="id" type="notation">&lt;-&gt;</span></a> <span class="id" type="var">f</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">g</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">f</span> <span class="id" type="var">g</span>.<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" type="tactic">destruct</span> <span class="id" type="var">f</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">g</span>; <span class="id" type="tactic">simpl</span>; (<span class="id" type="tactic">reflexivity</span> || <span class="id" type="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id" type="tactic">subst</span> <span class="id" type="var">g</span>; <span class="id" type="tactic">destruct</span> <span class="id" type="var">f</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="arity"><span class="id" type="definition">arity</span></a> (<span class="id" type="var">f</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#symbol"><span class="id" type="inductive">symbol</span></a>) : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">f</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> =&gt; 1<br/>
&nbsp;&nbsp;| <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> =&gt; 1<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h1 class="section">Variables</h1>


<br/> <br/>
   We only need one variable that is used in both rewrite rules. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="variable"><span class="id" type="definition">variable</span></a> : <span class="id" type="keyword">Set</span> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#unit"><span class="id" type="inductive">unit</span></a>.<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="beq_var"><span class="id" type="definition">beq_var</span></a> (<span class="id" type="var">x</span> <span class="id" type="var">y</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#variable"><span class="id" type="definition">variable</span></a>) : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" type="inductive">bool</span></a> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="beq_var_ok"><span class="id" type="lemma">beq_var_ok</span></a> : <span class="id" type="keyword">forall</span> <span class="id" type="var">x</span> <span class="id" type="var">y</span>, <a class="idref" href="NoUniqueNormalFormsWO.html#beq_var"><span class="id" type="definition">beq_var</span></a> <span class="id" type="var">x</span> <span class="id" type="var">y</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#true"><span class="id" type="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_<->_x"><span class="id" type="notation">&lt;-&gt;</span></a> <span class="id" type="var">x</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <span class="id" type="var">y</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> [] []; <span class="id" type="tactic">split</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h1 class="section">Terms</h1>


<br/> <br/>
   Terms over the given signature and variable. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="F"><span class="id" type="definition">F</span></a> : <a class="idref" href="Signature.html#signature"><span class="id" type="record">signature</span></a> := <a class="idref" href="Signature.html#Signature"><span class="id" type="constructor">Signature</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#arity"><span class="id" type="definition">arity</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#beq_symb_ok"><span class="id" type="lemma">beq_symb_ok</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="X"><span class="id" type="definition">X</span></a> : <a class="idref" href="Variables.html#variables"><span class="id" type="record">variables</span></a> := <span class="id" type="keyword">Variables</span> <a class="idref" href="NoUniqueNormalFormsWO.html#beq_var_ok"><span class="id" type="lemma">beq_var_ok</span></a>.<br/>

<br/>
<span class="id" type="var">Notation </span><a name="term"><span class="id" type="abbreviation">term</span></a> := (<a class="idref" href="Term.html#term"><span class="id" type="inductive">term</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="fterm"><span class="id" type="abbreviation">fterm</span></a> := (<a class="idref" href="FiniteTerm.html#finite_term"><span class="id" type="inductive">finite_term</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="terms"><span class="id" type="abbreviation">terms</span></a> := (<a class="idref" href="Vector.html#vector"><span class="id" type="definition">vector</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>).<br/>

<br/>
</div>

<div class="doc">
We define notational shortcuts for constructing terms:
<ul>
<li> variable <span class="inlinecode"><span class="id" type="var">x</span></span> by <span class="inlinecode"><span class="id" type="var">x</span>!</span>

</li>
<li> function application of <span class="inlinecode"><span class="id" type="var">f</span></span> to <span class="inlinecode"><span class="id" type="var">a</span></span> by <span class="inlinecode"><span class="id" type="var">f</span> @ <span class="id" type="var">a</span></span>

</li>
<li> function application of <span class="inlinecode"><span class="id" type="var">f</span></span> to <span class="inlinecode"><span class="id" type="var">a</span></span> by <span class="inlinecode"><span class="id" type="var">f</span> @@ <span class="id" type="var">a</span></span> for finite terms 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="::x_!"><span class="id" type="notation">"</span></a>x !" := (@<a class="idref" href="FiniteTerm.html#FVar"><span class="id" type="constructor">FVar</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">x</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 75).<br/>

<br/>
<span class="id" type="var">Notation </span><a name="::x_@_x"><span class="id" type="notation">"</span></a>f @ a" := (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">f</span> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <span class="id" type="var">a</span> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>))) (<span class="id" type="var">right</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 75).<br/>
<span class="id" type="var">Notation </span><a name="::x_@@_x"><span class="id" type="notation">"</span></a>f @@ a" := (@<a class="idref" href="FiniteTerm.html#FFun"><span class="id" type="constructor">FFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">f</span> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <span class="id" type="var">a</span> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a>))) (<span class="id" type="var">right</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 75).<br/>

<br/>
</div>

<div class="doc">
UUU... 
</div>
<div class="code">
<span class="id" type="keyword">CoFixpoint</span> <a name="repeat_U"><span class="id" type="definition">repeat_U</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>.<br/>

<br/>
</div>

<div class="doc">
DDD... 
</div>
<div class="code">
<span class="id" type="keyword">CoFixpoint</span> <a name="repeat_D"><span class="id" type="definition">repeat_D</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>.<br/>

<br/>
</div>

<div class="doc">
U^n t 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
D^n t 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="Dnt"><span class="id" type="definition">Dnt</span></a> (<span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
U^2n t 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="U2nt"><span class="id" type="definition">U2nt</span></a> (<span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U2nt"><span class="id" type="definition">U2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
D^2n t 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="D2nt"><span class="id" type="definition">D2nt</span></a> (<span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D2nt"><span class="id" type="definition">D2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
D^n U^n t 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
U^n D^n t 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
D^2n U^2n t 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="D2nU2nt"><span class="id" type="definition">D2nU2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#D2nt"><span class="id" type="definition">D2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U2nt"><span class="id" type="definition">U2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
U^2n D^2n t 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="U2nD2nt"><span class="id" type="definition">U2nD2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#U2nt"><span class="id" type="definition">U2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D2nt"><span class="id" type="definition">D2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
We now define the term

<br/> <br/>
     <span class="inlinecode"><span class="id" type="var">psi</span></span> = D U^2 D^3 U^4 ...

<br/> <br/>
   via an auxiliary parameterised term <span class="inlinecode"><span class="id" type="var">psi'</span></span>.

<br/> <br/>
   We would like to define psi' like this
<br/>
<span class="inlinecode">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">CoFixpoint</span> <span class="id" type="var">psi'</span> <span class="id" type="var">n</span> : <span class="id" type="var">term</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">Unt</span> <span class="id" type="var">n</span> (<span class="id" type="var">Dnt</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>) (<span class="id" type="var">psi'</span> (<span class="id" type="var">S</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)))).
<br/> <br/>
</span>   but unfortunately this is not in guarded form. We therefore turn to a
   more complex definition with anonymous cofixpoints. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">n</span></span> = D^n U^Sn D^SSn U^SSSn ... 
</div>
<div class="code">
<span class="id" type="keyword">CoFixpoint</span> <a name="psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;(<span class="id" type="var">cofix</span> <span class="id" type="var">D2nDt</span> (<span class="id" type="var">d</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">d</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> (<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><span class="id" type="var">U2nt</span> <span class="id" type="var">u</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">d</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><span class="id" type="var">D2nDt</span> <span class="id" type="var">d</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) <span class="id" type="var">n</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="psi"><span class="id" type="definition">psi</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> 0.<br/>

<br/>
</div>

<div class="doc">
Some useful lemmas on bisimilarity and equality of common terms follow. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_bis_U"><span class="id" type="lemma">term_bis_U</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">s</span> -&gt; <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">)</span></a> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">s</span><a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_bis_D"><span class="id" type="lemma">term_bis_D</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">s</span> -&gt; <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">)</span></a> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">s</span><a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_eq_up_to_n_Unt_repeat_U"><span class="id" type="lemma">term_eq_up_to_n_Unt_repeat_U</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>); <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_eq_up_to_n_Dnt_repeat_D"><span class="id" type="lemma">term_eq_up_to_n_Dnt_repeat_D</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>); <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_bis_Unt"><span class="id" type="lemma">term_bis_Unt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">s</span> -&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">s</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_U"><span class="id" type="lemma">term_bis_U</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="term_bis_Dnt"><span class="id" type="lemma">term_bis_Dnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">s</span> -&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">s</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intros</span> <span class="id" type="var">t</span> <span class="id" type="var">s</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_D"><span class="id" type="lemma">term_bis_D</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="UU2nt_eq_U2nUt"><span class="id" type="lemma">UU2nt_eq_U2nUt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U2nt"><span class="id" type="definition">U2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U2nt"><span class="id" type="definition">U2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="DD2nt_eq_D2nDt"><span class="id" type="lemma">DD2nt_eq_D2nDt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D2nt"><span class="id" type="definition">D2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D2nt"><span class="id" type="definition">D2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="DSnUSnt_eq_DDnUnUt"><span class="id" type="lemma">DSnUSnt_eq_DDnUnUt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="USnDSnt_eq_UUnDnDt"><span class="id" type="lemma">USnDSnt_eq_UUnDnDt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">UnDnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="D2SnU2Snt_eq_DDD2nU2nUUt"><span class="id" type="lemma">D2SnU2Snt_eq_DDD2nU2nUUt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#D2nU2nt"><span class="id" type="definition">D2nU2nt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D2nU2nt"><span class="id" type="definition">D2nU2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">D2nU2nt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UU2nt_eq_U2nUt"><span class="id" type="lemma">UU2nt_eq_U2nUt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UU2nt_eq_U2nUt"><span class="id" type="lemma">UU2nt_eq_U2nUt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="U2SnD2Snt_eq_UUU2nD2nDDt"><span class="id" type="lemma">U2SnD2Snt_eq_UUU2nD2nDDt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#U2nD2nt"><span class="id" type="definition">U2nD2nt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U2nD2nt"><span class="id" type="definition">U2nD2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">U2nD2nt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DD2nt_eq_D2nDt"><span class="id" type="lemma">DD2nt_eq_D2nDt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DD2nt_eq_D2nDt"><span class="id" type="lemma">DD2nt_eq_D2nDt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="D2nU2nt_eq_D2nU2nt"><span class="id" type="lemma">D2nU2nt_eq_D2nU2nt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#D2nU2nt"><span class="id" type="definition">D2nU2nt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">D2nU2nt</span>, <span class="id" type="var">D2nt</span>, <span class="id" type="var">U2nt</span>, <span class="id" type="var">DnUnt</span>, <span class="id" type="var">Dnt</span>, <span class="id" type="var">Unt</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#D2SnU2Snt_eq_DDD2nU2nUUt"><span class="id" type="lemma">D2SnU2Snt_eq_DDD2nU2nUUt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DSnUSnt_eq_DDnUnUt"><span class="id" type="lemma">DSnUSnt_eq_DDnUnUt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">with</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" type="lemma">eq_sym</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_Sm"><span class="id" type="lemma">plus_n_Sm</span></a> <span class="id" type="var">n</span> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0))).<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DSnUSnt_eq_DDnUnUt"><span class="id" type="lemma">DSnUSnt_eq_DDnUnUt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Some useful (but ugly) lemmas on bisimilarity and equality of psi and
   (partial) unfoldings follow. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="UU2nt_eq_U2nUt_unfolded"><span class="id" type="lemma">UU2nt_eq_U2nUt_unfolded</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> (<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) <span class="id" type="var">n</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) 0)).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) 0)).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">with</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="psin_eq_DD2nU2nUUpsiSn"><span class="id" type="lemma">psin_eq_DD2nU2nUUpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D2nU2nt"><span class="id" type="definition">D2nU2nt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">)</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">generalize</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) 1)).<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">D2nU2nt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) 0)).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))).<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#D2SnU2Snt_eq_DDD2nU2nUUt"><span class="id" type="lemma">D2SnU2Snt_eq_DDD2nU2nUUt</span></a>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UU2nt_eq_U2nUt_unfolded"><span class="id" type="lemma">UU2nt_eq_U2nUt_unfolded</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UU2nt_eq_U2nUt_unfolded"><span class="id" type="lemma">UU2nt_eq_U2nUt_unfolded</span></a> <span class="id" type="keyword">with</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> ((<span class="id" type="var">cofix</span> <span class="id" type="var">D2nDt</span> (<span class="id" type="var">d</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">d</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="var">cofix</span> <span class="id" type="var">U2nt</span> (<span class="id" type="var">u</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">u</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0 =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">u0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">U2nt</span> <span class="id" type="var">u0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">d0</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">D2nDt</span> <span class="id" type="var">d0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="keyword">end</span>) <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">with</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="psin_eq_DS2nUS2nUpsiSn"><span class="id" type="lemma">psin_eq_DS2nUS2nUpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psin_eq_DD2nU2nUUpsiSn"><span class="id" type="lemma">psin_eq_DD2nU2nUUpsiSn</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#D2nU2nt_eq_D2nU2nt"><span class="id" type="lemma">D2nU2nt_eq_D2nU2nt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DSnUSnt_eq_DDnUnUt"><span class="id" type="lemma">DSnUSnt_eq_DDnUnUt</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h1 class="section">Contexts</h1>


<br/> <br/>
   Contexts over the given signature and variable. 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="context"><span class="id" type="abbreviation">context</span></a> := (<a class="idref" href="Context.html#context"><span class="id" type="inductive">context</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a>).<br/>

<br/>
</div>

<div class="doc">
Notational shortcut for function application in contexts. 
</div>
<div class="code">
<span class="id" type="var">Notation </span><a name="::x_@@@_x"><span class="id" type="notation">"</span></a>f @@@ a" := (@<a class="idref" href="Context.html#CFun"><span class="id" type="constructor">CFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">f</span> 0 0 (@<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#refl_equal"><span class="id" type="abbreviation">refl_equal</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#arity"><span class="id" type="definition">arity</span></a> <span class="id" type="var">f</span>)) (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>) <span class="id" type="var">a</span> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>)) (<span class="id" type="var">right</span> <span class="id" type="var">associativity</span>, <span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 75).<br/>

<br/>
</div>

<div class="doc">
D^n c 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#context"><span class="id" type="abbreviation">context</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">@@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
U^n c 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#context"><span class="id" type="abbreviation">context</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <span class="id" type="var">c</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">@@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span><a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@@_x"><span class="id" type="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
We prove some lemmas about filling contexts. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_DnHole_t"><span class="id" type="lemma">fill_DnHole_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_UnHole_t"><span class="id" type="lemma">fill_UnHole_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_DmUnc_t"><span class="id" type="lemma">fill_DmUnc_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span>)) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> <span class="id" type="var">t</span>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_UmDnc_t"><span class="id" type="lemma">fill_UmDnc_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <span class="id" type="var">c</span>)) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> <span class="id" type="var">t</span>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">c</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_DmUnHole_t"><span class="id" type="lemma">fill_DmUnHole_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_DmUnc_t"><span class="id" type="lemma">fill_DmUnc_t</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fill_UmDnHole_t"><span class="id" type="lemma">fill_UmDnHole_t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_UmDnc_t"><span class="id" type="lemma">fill_UmDnc_t</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h1 class="section">Rewriting</h1>


<br/> <br/>
   We construct the rewrite rules for the TRS and show it is weakly
   orthogonal. We also show that UUU... and DDD... are normal forms. 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="trs"><span class="id" type="abbreviation">trs</span></a> := (<a class="idref" href="Rewriting.html#trs"><span class="id" type="definition">trs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a>).<br/>

<br/>
</div>

<div class="doc">
We use this variable in the rewrite rules 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="varx"><span class="id" type="definition">varx</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> := <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>.<br/>

<br/>
</div>

<div class="doc">
Rule <span class="inlinecode"><span class="id" type="var">DU</span></span> : DUx -&gt; x 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="DU_l"><span class="id" type="definition">DU_l</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="DU_r"><span class="id" type="definition">DU_r</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_DU"><span class="id" type="lemma">wf_DU</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Term.html#is_var"><span class="id" type="definition">is_var</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU_l"><span class="id" type="definition">DU_l</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#incl"><span class="id" type="definition">incl</span></a> (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU_r"><span class="id" type="definition">DU_r</span></a>) (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU_l"><span class="id" type="definition">DU_l</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">a</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="DU"><span class="id" type="definition">DU</span></a> : <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a> := <a class="idref" href="Rewriting.html#Rule"><span class="id" type="constructor">Rule</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU_l"><span class="id" type="definition">DU_l</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU_r"><span class="id" type="definition">DU_r</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_DU"><span class="id" type="lemma">wf_DU</span></a>.<br/>

<br/>
</div>

<div class="doc">
Rule <span class="inlinecode"><span class="id" type="var">UD</span></span> : UDx -&gt; x 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="UD_l"><span class="id" type="definition">UD_l</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>.<br/>
<span class="id" type="keyword">Definition</span> <a name="UD_r"><span class="id" type="definition">UD_r</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_UD"><span class="id" type="lemma">wf_UD</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Term.html#is_var"><span class="id" type="definition">is_var</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_l"><span class="id" type="definition">UD_l</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#false"><span class="id" type="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#incl"><span class="id" type="definition">incl</span></a> (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_r"><span class="id" type="definition">UD_r</span></a>) (<a class="idref" href="FiniteTerm.html#vars"><span class="id" type="definition">vars</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_l"><span class="id" type="definition">UD_l</span></a>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">split</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">a</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="UD"><span class="id" type="definition">UD</span></a> : <a class="idref" href="Rewriting.html#rule"><span class="id" type="record">rule</span></a> := <a class="idref" href="Rewriting.html#Rule"><span class="id" type="constructor">Rule</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_l"><span class="id" type="definition">UD_l</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_r"><span class="id" type="definition">UD_r</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_UD"><span class="id" type="lemma">wf_UD</span></a>.<br/>

<br/>
</div>

<div class="doc">
The TRS <span class="inlinecode"><span class="id" type="var">UD_trs</span></span> as a list of its rules. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Definition</span> <a name="UD_trs"><span class="id" type="definition">UD_trs</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#trs"><span class="id" type="abbreviation">trs</span></a> := <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:list_scope:x_::_x"><span class="id" type="notation">::</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#:list_scope:x_::_x"><span class="id" type="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" type="constructor">nil</span></a>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" type="var">UD_trs</span></span> is trivialy left-linear. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="left_linear_UD"><span class="id" type="lemma">left_linear_UD</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#trs_left_linear"><span class="id" type="definition">trs_left_linear</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">constructor</span>; [| <span class="id" type="var">constructor</span>];<br/>
&nbsp;&nbsp;<span class="id" type="tactic">unfold</span> <span class="id" type="var">left_linear</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">linear</span>; <span class="id" type="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span>; <span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
All critical pairs in <span class="inlinecode"><span class="id" type="var">UD_trs</span></span> are trivial. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="critical_pairs_trivial_UD"><span class="id" type="lemma">critical_pairs_trivial_UD</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#critical_pair"><span class="id" type="definition">critical_pair</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" type="var">t1</span> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <span class="id" type="var">t2</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">t1</span> <span class="id" type="var">t2</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">critical_pair</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">r1</span> [<span class="id" type="var">r2</span> [[| [| <span class="id" type="var">a</span>] [| [| <span class="id" type="var">b</span>] [| <span class="id" type="var">c</span> <span class="id" type="var">p</span>]]] [<span class="id" type="var">sigma</span> [<span class="id" type="var">tau</span> [[<span class="id" type="var">Hr1</span> | [<span class="id" type="var">Hr1</span> | []]] [[<span class="id" type="var">Hr2</span> | [<span class="id" type="var">Hr2</span> | []]] [<span class="id" type="var">T</span> <span class="id" type="var">H</span>]]]]]]]];<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Hr1</span> <span class="id" type="keyword">in</span> * |-;<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">Hr2</span> <span class="id" type="keyword">in</span> * |-;<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">r1</span> <span class="id" type="var">r2</span> <span class="id" type="var">Hr1</span> <span class="id" type="var">Hr2</span>;<br/>
<span class="id" type="tactic">try</span> (<span class="id" type="var">contradict</span> <span class="id" type="var">T</span>; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">fail</span>);<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">T</span>;<br/>
<span class="id" type="tactic">try</span> (<span class="id" type="var">contradict</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">fail</span>); <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">V</span> [<span class="id" type="var">H</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>]]];<br/>
<span class="id" type="tactic">try</span> (<span class="id" type="var">contradict</span> <span class="id" type="var">V</span>; <span class="id" type="tactic">fail</span>);<br/>
<span class="id" type="tactic">apply</span> (<a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="var">H1</span>); <span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_symm"><span class="id" type="lemma">term_bis_symm</span></a>; <span class="id" type="tactic">apply</span> (<a class="idref" href="TermEquality.html#term_bis_trans"><span class="id" type="lemma">term_bis_trans</span></a> <span class="id" type="var">H2</span>);<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H1</span> <span class="id" type="var">H2</span>;<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>; <span class="id" type="var">specialize</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> (<a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a> (<span class="id" type="var">n</span> := 0)); <span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>; <span class="id" type="var">specialize</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> (<a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a> (<span class="id" type="var">n</span> := 0)); <span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>;<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">V</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">x</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vcast</span>.<br/>
<span class="id" type="tactic">generalize</span> (<a class="idref" href="Context.html#lt_plus_minus_r"><span class="id" type="lemma">lt_plus_minus_r</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Gt.html#gt_le_S"><span class="id" type="lemma">Gt.gt_le_S</span></a> 0 1 (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_0_Sn"><span class="id" type="lemma">Lt.lt_0_Sn</span></a> 0))).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">generalize</span> (<a class="idref" href="Context.html#lt_plus_minus_r"><span class="id" type="lemma">lt_plus_minus_r</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_le_S"><span class="id" type="lemma">Lt.lt_le_S</span></a> 0 1 (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_0_Sn"><span class="id" type="lemma">Lt.lt_0_Sn</span></a> 0))).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">x</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vcast</span>.<br/>
<span class="id" type="tactic">generalize</span> (<a class="idref" href="Context.html#lt_plus_minus_r"><span class="id" type="lemma">lt_plus_minus_r</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Gt.html#gt_le_S"><span class="id" type="lemma">Gt.gt_le_S</span></a> 0 1 (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_0_Sn"><span class="id" type="lemma">Lt.lt_0_Sn</span></a> 0))).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">generalize</span> (<a class="idref" href="Context.html#lt_plus_minus_r"><span class="id" type="lemma">lt_plus_minus_r</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_le_S"><span class="id" type="lemma">Lt.lt_le_S</span></a> 0 1 (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Arith.Lt.html#lt_0_Sn"><span class="id" type="lemma">Lt.lt_0_Sn</span></a> 0))).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="weakly_orthogonal_UD"><span class="id" type="lemma">weakly_orthogonal_UD</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#weakly_orthogonal"><span class="id" type="definition">weakly_orthogonal</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#left_linear_UD"><span class="id" type="lemma">left_linear_UD</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#critical_pairs_trivial_UD"><span class="id" type="lemma">critical_pairs_trivial_UD</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
DDD... is a normal form. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="normal_form_repeat_D"><span class="id" type="lemma">normal_form_repeat_D</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#normal_form"><span class="id" type="definition">normal_form</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
TODO: a lot of this proof is a mess, cleanup.
   Also, I expect that this could be generalized and shortened quite a bit
   by using pos_eq. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span> [<span class="id" type="var">c</span> [<span class="id" type="var">r</span> [<span class="id" type="var">u</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>]]]].<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> | [<span class="id" type="var">H1</span> | []]].<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> *|-.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="Context.html#hole_depth"><span class="id" type="definition">hole_depth</span></a> <span class="id" type="var">c</span>)))).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H0</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">y0</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> 1 (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <span class="id" type="var">v</span>) (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vmap"><span class="id" type="definition">vmap</span></a> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>) (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a>)))))).<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">x0</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_refl"><span class="id" type="lemma">term_eq_up_to_refl</span></a>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">x0</span>.<br/>

<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) 2).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := <span class="id" type="var">H1</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">d</span> : <span class="id" type="var">f</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a>).<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">y0</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">ij</span> : <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">j</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [| [| <span class="id" type="var">i</span>]]; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">discriminate</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj1"><span class="id" type="lemma">proj1</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj2"><span class="id" type="lemma">proj2</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">f</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">d</span> <span class="id" type="var">ij</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHc</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">IHc</span>.<br/>

<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_implies_term_bis"><span class="id" type="lemma">term_eq_implies_term_bis</span></a>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H2'</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>)).<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">jaja</span> : <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (@<a class="idref" href="Context.html#CFun"><span class="id" type="constructor">CFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> 0 0 <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">c</span> <span class="id" type="var">v2</span>) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>)) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> @<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>)).<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">jaja</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">exact</span> ((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="TermEquality.html#teut_fun_inv"><span class="id" type="lemma">teut_fun_inv</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">n</span> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>)) <span class="id" type="var">H2'</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>

<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">v0</span> <span class="id" type="var">x</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">c</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">injection</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">_</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span> <span class="id" type="var">H</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">v4</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e0</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>

<br/>
</div>

<div class="doc">
Almost the same argument follows for <span class="inlinecode"><span class="id" type="var">r</span>=<span class="id" type="var">UD</span></span> instead of <span class="inlinecode"><span class="id" type="var">r</span>=<span class="id" type="var">DU</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> *|-.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="Context.html#hole_depth"><span class="id" type="definition">hole_depth</span></a> <span class="id" type="var">c</span>))).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">H2</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">d</span> : <span class="id" type="var">f</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a>).<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">ij</span> : <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">j</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [| [| <span class="id" type="var">i</span>]]; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">discriminate</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">v0</span> <span class="id" type="var">v1</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj1"><span class="id" type="lemma">proj1</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj2"><span class="id" type="lemma">proj2</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">f</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">d</span> <span class="id" type="var">ij</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHc</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">IHc</span>.<br/>

<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_implies_term_bis"><span class="id" type="lemma">term_eq_implies_term_bis</span></a>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H2'</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>)).<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">jaja</span> : <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (@<a class="idref" href="Context.html#CFun"><span class="id" type="constructor">CFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> 0 0 <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">c</span> <span class="id" type="var">v2</span>) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>)) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> @<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>)).<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">jaja</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">exact</span> ((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="TermEquality.html#teut_fun_inv"><span class="id" type="lemma">teut_fun_inv</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">n</span> <a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>)) <span class="id" type="var">H2'</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
UUU... is a normal form. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="normal_form_repeat_U"><span class="id" type="lemma">normal_form_repeat_U</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#normal_form"><span class="id" type="definition">normal_form</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
</div>

<div class="doc">
This proof is just a copy of the DDD... proof. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span> [<span class="id" type="var">c</span> [<span class="id" type="var">r</span> [<span class="id" type="var">u</span> [<span class="id" type="var">H1</span> <span class="id" type="var">H2</span>]]]].<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">H1</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">H1</span> | [<span class="id" type="var">H1</span> | []]].<br/>

<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> *|-.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="Context.html#hole_depth"><span class="id" type="definition">hole_depth</span></a> <span class="id" type="var">c</span>))).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">x</span>.<br/>

<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">H2</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">d</span> : <span class="id" type="var">f</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a>).<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">ij</span> : <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">j</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [| [| <span class="id" type="var">i</span>]]; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">discriminate</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">v0</span> <span class="id" type="var">v1</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj1"><span class="id" type="lemma">proj1</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj2"><span class="id" type="lemma">proj2</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">f</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">d</span> <span class="id" type="var">ij</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHc</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">IHc</span>.<br/>

<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_implies_term_bis"><span class="id" type="lemma">term_eq_implies_term_bis</span></a>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H2'</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>)).<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">jaja</span> : <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (@<a class="idref" href="Context.html#CFun"><span class="id" type="constructor">CFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> 0 0 <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">c</span> <span class="id" type="var">v2</span>) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>)) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> @<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>)).<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">jaja</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">exact</span> ((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="TermEquality.html#teut_fun_inv"><span class="id" type="lemma">teut_fun_inv</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">n</span> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))) <span class="id" type="var">v2</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>)) <span class="id" type="var">H2'</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>

<br/>
</div>

<div class="doc">
Almost the same argument follows for <span class="inlinecode"><span class="id" type="var">r</span>=<span class="id" type="var">UD</span></span> instead of <span class="inlinecode"><span class="id" type="var">r</span>=<span class="id" type="var">DU</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">H1</span> <span class="id" type="keyword">in</span> *|-.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H1</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="Context.html#hole_depth"><span class="id" type="definition">hole_depth</span></a> <span class="id" type="var">c</span>)))).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H'</span> := <span class="id" type="var">H0</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H'</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">y0</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> 1 (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <span class="id" type="var">v</span>) (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vmap"><span class="id" type="definition">vmap</span></a> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@@_x"><span class="id" type="notation">@@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#varx"><span class="id" type="definition">varx</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#::x_!"><span class="id" type="notation">!</span></a>) (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#fterm"><span class="id" type="abbreviation">fterm</span></a>)))))).<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">x0</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_refl"><span class="id" type="lemma">term_eq_up_to_refl</span></a>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">x0</span>.<br/>

<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">c</span>.<br/>

<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := (<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) 2).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := <span class="id" type="var">H1</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>

<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">d</span> : <span class="id" type="var">f</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a>).<br/>
<span class="id" type="tactic">inversion_clear</span> <span class="id" type="var">y0</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>

<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">rewrite</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">ij</span> : <span class="id" type="var">i</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_/\_x"><span class="id" type="notation">/\</span></a> <span class="id" type="var">j</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> 0).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">i</span> <span class="id" type="keyword">as</span> [| [| <span class="id" type="var">i</span>]]; <span class="id" type="tactic">auto</span>; <span class="id" type="tactic">discriminate</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj1"><span class="id" type="lemma">proj1</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#proj2"><span class="id" type="lemma">proj2</span></a> <span class="id" type="var">ij</span>).<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">H2</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">f</span> <span class="id" type="var">i</span> <span class="id" type="var">j</span> <span class="id" type="var">d</span> <span class="id" type="var">ij</span>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHc</span>; <span class="id" type="tactic">clear</span> <span class="id" type="var">IHc</span>.<br/>

<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_implies_term_bis"><span class="id" type="lemma">term_eq_implies_term_bis</span></a>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H2'</span> : <a class="idref" href="TermEquality.html#term_eq_up_to"><span class="id" type="inductive">term_eq_up_to</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (@<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>)).<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">jaja</span> : <a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (@<a class="idref" href="Context.html#CFun"><span class="id" type="constructor">CFun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> 0 0 <span class="id" type="var">e</span> <span class="id" type="var">v1</span> <span class="id" type="var">c</span> <span class="id" type="var">v2</span>) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>)) <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> @<a class="idref" href="Term.html#Fun"><span class="id" type="constructor">Fun</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>)).<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">jaja</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">exact</span> ((<a class="idref" href="TermEquality.html#term_bis_implies_term_eq"><span class="id" type="lemma">term_bis_implies_term_eq</span></a> <span class="id" type="var">H2</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">apply</span> (@<a class="idref" href="TermEquality.html#teut_fun_inv"><span class="id" type="lemma">teut_fun_inv</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#F"><span class="id" type="definition">F</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a> <span class="id" type="var">n</span> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> (<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> <span class="id" type="var">c</span> (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> <span class="id" type="var">u</span> (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))) <span class="id" type="var">v2</span>) (<a class="idref" href="Vector.html#vcons"><span class="id" type="definition">vcons</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a> (<a class="idref" href="Vector.html#vnil"><span class="id" type="definition">vnil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>)) <span class="id" type="var">H2'</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken"><span class="id" type="lemma">term_eq_up_to_weaken</span></a>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>

<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">v0</span> <span class="id" type="var">x</span> <span class="id" type="var">H</span> <span class="id" type="var">y0</span> <span class="id" type="var">H0</span> <span class="id" type="var">H'</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">c</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H2</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H3</span> := <span class="id" type="var">H</span> <a class="idref" href="Vector.html#First"><span class="id" type="constructor">First</span></a>).<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">H3</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">x</span>.<br/>
<span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">injection</span> <span class="id" type="var">y</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">_</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">clear</span> <span class="id" type="var">y</span> <span class="id" type="var">x</span> <span class="id" type="var">H</span> <span class="id" type="var">v1</span> <span class="id" type="var">v2</span> <span class="id" type="var">v4</span>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">e0</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">e</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
DDD... and UUU... are different. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="neq_repeat_D_repeat_U"><span class="id" type="lemma">neq_repeat_D_repeat_U</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a> <a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>), (<a class="idref" href="Term.html#peek_eq"><span class="id" type="lemma">peek_eq</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>) <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab18"></a><h1 class="section">Rewrite sequences</h1>


<br/> <br/>
   We now build our infinite rewrite sequences. 
</div>
<div class="code">

<br/>
<span class="id" type="var">Notation </span><a name="Step"><span class="id" type="abbreviation">Step</span></a> := (<a class="idref" href="Rewriting.html#Step"><span class="id" type="constructor">Step</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>).<br/>
<span class="id" type="var">Notation </span><a name="Nil'"><span class="id" type="abbreviation">Nil'</span></a> := (<a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>).<br/>

<br/>
<span class="id" type="var">Notation </span><a name="::x_[>]_x"><span class="id" type="notation">"</span></a>s [&gt;] t" := (<a class="idref" href="Rewriting.html#step"><span class="id" type="inductive">step</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>
<span class="id" type="var">Notation </span><a name="::x_->>_x"><span class="id" type="notation">"</span></a>s -&gt;&gt; t" := (<a class="idref" href="Rewriting.html#sequence"><span class="id" type="inductive">sequence</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 40).<br/>

<br/>
<span class="id" type="var">Notation </span><a name="::x_[_x_]"><span class="id" type="notation">"</span></a>r [ i ]" := (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="::x_[1_x_]"><span class="id" type="notation">"</span></a>r [1 i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT1"><span class="id" type="definition">projT1</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="::x_[2_x_]"><span class="id" type="notation">"</span></a>r [2 i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT1"><span class="id" type="definition">projT1</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="::x_[seq_x_]"><span class="id" type="notation">"</span></a>r [seq i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#fst"><span class="id" type="definition">fst</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>
<span class="id" type="var">Notation </span><a name="::x_[stp_x_]"><span class="id" type="notation">"</span></a>r [stp i ]" := (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#snd"><span class="id" type="definition">snd</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Specif.html#projT2"><span class="id" type="definition">projT2</span></a> (<a class="idref" href="Rewriting.html#pred"><span class="id" type="definition">pred</span></a> <span class="id" type="var">r</span> <span class="id" type="var">i</span>))) (<span class="id" type="tactic">at</span> <span class="id" type="var">level</span> 60).<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="DU_in"><span class="id" type="lemma">DU_in</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">left</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="UD_in"><span class="id" type="lemma">UD_in</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Lists.List.html#In"><span class="id" type="definition">In</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">right</span>; <span class="id" type="var">left</span>; <span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="sub_t"><span class="id" type="definition">sub_t</span></a> <span class="id" type="var">t</span> (<span class="id" type="var">x</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#X"><span class="id" type="definition">X</span></a>) : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> := <span class="id" type="var">t</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h2 class="section">psi -&gt;&gt; UUU...</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_bis_UmDSnUSnt"><span class="id" type="lemma">fact_term_bis_UmDSnUSnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_UmDnHole_t"><span class="id" type="lemma">fill_UmDnHole_t</span></a>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_Unt"><span class="id" type="lemma">term_bis_Unt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_Dnt"><span class="id" type="lemma">term_bis_Dnt</span></a>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_refl"><span class="id" type="lemma">term_bis_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_eq_UmDnUnt"><span class="id" type="lemma">fact_term_eq_UmDnUnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_bis_UmDnUnt"><span class="id" type="lemma">fact_term_bis_UmDnUnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_eq_UmDnUnt"><span class="id" type="lemma">fact_term_eq_UmDnUnt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_refl"><span class="id" type="lemma">term_bis_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Step from U^m D^Sn U^Sn to U^m D^n U^n t. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="p_UmDSnUSnt_UmDnUnt"><span class="id" type="definition">p_UmDSnUSnt_UmDnUnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Step"><span class="id" type="abbreviation">Step</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#DU"><span class="id" type="definition">DU</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) <a class="idref" href="NoUniqueNormalFormsWO.html#DU_in"><span class="id" type="lemma">DU_in</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_bis_UmDSnUSnt"><span class="id" type="lemma">fact_term_bis_UmDSnUSnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_bis_UmDnUnt"><span class="id" type="lemma">fact_term_bis_UmDnUnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
</div>

<div class="doc">
n-step rewrite sequence from U^m D^n U^n t to U^m t. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="s_UmDnUnt_Umt"><span class="id" type="definition">s_UmDnUnt_Umt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">return</span> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Nil'"><span class="id" type="abbreviation">Nil'</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#p_UmDSnUSnt_UmDnUnt"><span class="id" type="definition">p_UmDSnUSnt_UmDnUnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#s_UmDnUnt_Umt"><span class="id" type="definition">s_UmDnUnt_Umt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
2n+1-step rewrite sequence from U^n <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">n</span></span> to U^Sn <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">Sn</span></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="s_Unpsin_USnpsiSn"><span class="id" type="definition">s_Unpsin_USnpsiSn</span></a> <span class="id" type="var">n</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
</div>

<div class="doc">
Coq 8.3-rc1 does the 'intro n' automatically, but 8.3-beta0-1 needs it. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
<span class="id" type="tactic">refine</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_UmDnUnt_Umt"><span class="id" type="definition">s_UmDnUnt_Umt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psin_eq_DS2nUS2nUpsiSn"><span class="id" type="lemma">psin_eq_DS2nUS2nUpsiSn</span></a>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="tactic">exact</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We would have liked to define the above by the following definition
   using <span class="inlinecode"><span class="id" type="var">Program</span></span>, but unfortunately it is not accepted by Coq. Is this
   a bug in <span class="inlinecode"><span class="id" type="var">Program</span></span>?

<br/> <br/>
<br/>
<span class="inlinecode"><span class="id" type="var">Program</span> <span class="id" type="keyword">Definition</span> <span class="id" type="var">s_Unpsin_USnpsiSn</span> <span class="id" type="var">n</span> : <span class="id" type="var">Unt</span> <span class="id" type="var">n</span> (<span class="id" type="var">psi'</span> <span class="id" type="var">n</span>) -&gt;&gt; <span class="id" type="var">Unt</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>) (<span class="id" type="var">psi'</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)) :=<br/>
&nbsp;&nbsp;<span class="id" type="var">s_UmDnUnt_Umt</span> <span class="id" type="var">n</span> (<span class="id" type="var">S</span> (2 * <span class="id" type="var">n</span>)) (<span class="id" type="var">U</span> @ <span class="id" type="var">psi'</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="keyword">Next</span> <span class="id" type="keyword">Obligation</span>.<br/>
<span class="id" type="tactic">symmetry</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">psin_eq_DS2nUS2nUpsiSn</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Next</span> <span class="id" type="keyword">Obligation</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">UUnt_eq_UnUt</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Defined</span>.
<br/> <br/>
</span>
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Rewrite sequence from <span class="inlinecode"><span class="id" type="var">psi</span></span> to U^n <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">n</span></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <span class="id" type="var">n</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">return</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Nil'"><span class="id" type="abbreviation">Nil'</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#s_Unpsin_USnpsiSn"><span class="id" type="definition">s_Unpsin_USnpsiSn</span></a> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="converges_Unpsin"><span class="id" type="lemma">converges_Unpsin</span></a> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>)) <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken_generalized"><span class="id" type="lemma">term_eq_up_to_weaken_generalized</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_eq_up_to_n_Unt_repeat_U"><span class="id" type="lemma">term_eq_up_to_n_Unt_repeat_U</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Omega-step rewrite sequence from <span class="inlinecode"><span class="id" type="var">psi</span></span> to UUU... 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="s_psi_repeat_U"><span class="id" type="definition">s_psi_repeat_U</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_U"><span class="id" type="definition">repeat_U</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#converges_Unpsin"><span class="id" type="lemma">converges_Unpsin</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h2 class="section">psi -&gt;&gt; DDD...</h2>

</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_bis_DmUSnDSnt"><span class="id" type="lemma">fact_term_bis_DmUSnDSnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#lhs"><span class="id" type="projection">lhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_DmUnHole_t"><span class="id" type="lemma">fill_DmUnHole_t</span></a>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">UnDnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_Dnt"><span class="id" type="lemma">term_bis_Dnt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_bis_Unt"><span class="id" type="lemma">term_bis_Unt</span></a>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">constructor</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">i</span>; <span class="id" type="tactic">dependent</span> <span class="id" type="tactic">destruction</span> <span class="id" type="var">i</span>; [<span class="id" type="var">idtac</span> | <span class="id" type="tactic">inversion</span> <span class="id" type="var">i</span>].<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">vmap</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_refl"><span class="id" type="lemma">term_bis_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_eq_DmUnDnt"><span class="id" type="lemma">fact_term_eq_DmUnDnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Dnc_t"><span class="id" type="lemma">fill_Dnc_t</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fill_Unc_t"><span class="id" type="lemma">fill_Unc_t</span></a>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="fact_term_bis_DmUnDnt"><span class="id" type="lemma">fact_term_bis_DmUnDnt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> (<span class="id" type="var">m</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>) (<span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Context.html#fill"><span class="id" type="definition">fill</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="Substitution.html#substitute"><span class="id" type="definition">substitute</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) (<a class="idref" href="Rewriting.html#rhs"><span class="id" type="projection">rhs</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="TermEquality.html#::x_[~]_x"><span class="id" type="notation">[~]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_eq_DmUnDnt"><span class="id" type="lemma">fact_term_eq_DmUnDnt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_bis_refl"><span class="id" type="lemma">term_bis_refl</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="p_DmUSnDSnt_DmUnDnt"><span class="id" type="definition">p_DmUSnDSnt_DmUnDnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Step"><span class="id" type="abbreviation">Step</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD"><span class="id" type="definition">UD</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnc"><span class="id" type="definition">Dnc</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unc"><span class="id" type="definition">Unc</span></a> <span class="id" type="var">n</span> <a class="idref" href="Context.html#Hole"><span class="id" type="constructor">Hole</span></a>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#sub_t"><span class="id" type="definition">sub_t</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)) <a class="idref" href="NoUniqueNormalFormsWO.html#UD_in"><span class="id" type="lemma">UD_in</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_bis_DmUSnDSnt"><span class="id" type="lemma">fact_term_bis_DmUSnDSnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#fact_term_bis_DmUnDnt"><span class="id" type="lemma">fact_term_bis_DmUnDnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>

<br/>
<span class="id" type="keyword">Fixpoint</span> <a name="s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">return</span> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Nil'"><span class="id" type="abbreviation">Nil'</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#p_DmUSnDSnt_DmUnDnt"><span class="id" type="definition">p_DmUSnDSnt_DmUnDnt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>)<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
2n-step rewrite sequence from D^n U^2n <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">n</span></span> to D^Sn U2Sn <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">Sn</span></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Definition</span> <a name="s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>)) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
</div>

<div class="doc">
Coq 8.3-rc1 does the 'intro n' automatically, but 8.3-beta0-1 needs it. 
</div>
<div class="code">
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">assert</span> (<span class="id" type="var">H</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#UnDnt"><span class="id" type="definition">UnDnt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))).<br/>
<span class="id" type="tactic">refine</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">n</span> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))<a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">)</span></a>)).<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">UnDnt</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psin_eq_DS2nUS2nUpsiSn"><span class="id" type="lemma">psin_eq_DS2nUS2nUpsiSn</span></a>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_Sm"><span class="id" type="lemma">plus_n_Sm</span></a> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_Sm"><span class="id" type="lemma">plus_n_Sm</span></a>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a>.<br/>
<span class="id" type="tactic">exact</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We would have liked to define the above by the following definition
   using <span class="inlinecode"><span class="id" type="var">Program</span></span>, but unfortunately it is not accepted by Coq. Is this
   a bug in <span class="inlinecode"><span class="id" type="var">Program</span></span>?

<br/> <br/>
<br/>
<span class="inlinecode"><span class="id" type="var">Program</span> <span class="id" type="keyword">Definition</span> <span class="id" type="var">s_DnU2npsin_DSnU2SnpsiSn</span> <span class="id" type="var">n</span> : <span class="id" type="var">Dnt</span> <span class="id" type="var">n</span> (<span class="id" type="var">Unt</span> (2 * <span class="id" type="var">n</span>) (<span class="id" type="var">psi'</span> <span class="id" type="var">n</span>)) -&gt;&gt; <span class="id" type="var">Dnt</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>) (<span class="id" type="var">Unt</span> (2 * (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)) (<span class="id" type="var">psi'</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>))) :=<br/>
&nbsp;&nbsp;<span class="id" type="var">s_DmUnDnt_Dmt</span> <span class="id" type="var">n</span> (2 * <span class="id" type="var">n</span>) (<span class="id" type="var">D</span> @ (<span class="id" type="var">Unt</span> (2 * (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)) (<span class="id" type="var">psi'</span> (<span class="id" type="var">S</span> <span class="id" type="var">n</span>)))).<br/>
<span class="id" type="keyword">Next</span> <span class="id" type="keyword">Obligation</span>.<br/>
<span class="id" type="tactic">symmetry</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">UnDnt</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">psin_eq_DS2nUS2nUpsiSn</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">DnUnt</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">DDnt_eq_DnDt</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">plus_n_Sm</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <span class="id" type="var">UUnt_eq_UnUt</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Defined</span>.<br/>
<span class="id" type="keyword">Next</span> <span class="id" type="keyword">Obligation</span>.<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">DDnt_eq_DnDt</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Defined</span>.
<br/> <br/>
</span>
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Rewrite sequence from <span class="inlinecode"><span class="id" type="var">psi</span></span> to D^Sn U^2Sn <span class="inlinecode"><span class="id" type="var">psi'</span> <span class="id" type="var">Sn</span></span>. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))) :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">n</span> <span class="id" type="keyword">return</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))) <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#O"><span class="id" type="constructor">O</span></a>   =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> 0<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> =&gt; <a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))<br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="converges_DSnU2SnpsiSn"><span class="id" type="lemma">converges_DSnU2SnpsiSn</span></a> : <a class="idref" href="TermEquality.html#converges"><span class="id" type="definition">converges</span></a> (<span class="id" type="keyword">fun</span> <span class="id" type="var">n</span> =&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))) <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">d</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="TermEquality.html#term_eq_up_to_weaken_generalized"><span class="id" type="lemma">term_eq_up_to_weaken_generalized</span></a> <span class="id" type="keyword">with</span> <span class="id" type="var">m</span>.<br/>
<span class="id" type="tactic">assumption</span>.<br/>
<span class="id" type="tactic">rewrite</span> <a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#term_eq_up_to_n_Dnt_repeat_D"><span class="id" type="lemma">term_eq_up_to_n_Dnt_repeat_D</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Definition</span> <a name="s_psi_repeat_D"><span class="id" type="definition">s_psi_repeat_D</span></a> : <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#repeat_D"><span class="id" type="definition">repeat_D</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#converges_DSnU2SnpsiSn"><span class="id" type="lemma">converges_DSnU2SnpsiSn</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h1 class="section">Well-formedness of the rewrite sequences</h1>


<br/> <br/>
   It should be noted that at this point, nothing has been said yet about
   well-formedness of the two rewrite sequences. Furthermore, they might
   not be convergent.

<br/> <br/>
   So we proceed by proving the <span class="inlinecode"><span class="id" type="keyword">wf</span></span> property for the rewrite sequences.
   Convergence seems our of our reach at this point unfortunately. 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">Well-formedness of psi -&gt;&gt; UUU...</h2>


<br/> <br/>
   We first prove all finite prefixes are indeed finite. Then we prove that
   every branch of the <span class="inlinecode"><span class="id" type="var">Lim</span></span> constructor is embedded in the next branch. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_UmDnUnt_Umt"><span class="id" type="lemma">finite_s_UmDnUnt_Umt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_UmDnUnt_Umt"><span class="id" type="definition">s_UmDnUnt_Umt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#snoc_finite"><span class="id" type="lemma">snoc_finite</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_Unpsin_USnpsiSn"><span class="id" type="lemma">finite_s_Unpsin_USnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_Unpsin_USnpsiSn"><span class="id" type="definition">s_Unpsin_USnpsiSn</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">s_Unpsin_USnpsiSn</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">eq_rect_r</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_UmDnUnt_Umt"><span class="id" type="lemma">finite_s_UmDnUnt_Umt</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_psi_Unpsin"><span class="id" type="lemma">finite_s_psi_Unpsin</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#append_finite"><span class="id" type="lemma">append_finite</span></a>.<br/>
<span class="id" type="tactic">exact</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_Unpsin_USnpsiSn"><span class="id" type="lemma">finite_s_Unpsin_USnpsiSn</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The following lemmas help establish <span class="inlinecode"><span class="id" type="keyword">wf</span></span>. They are not pretty. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="s_UmDnUnt_Umt_is_cons"><span class="id" type="lemma">s_UmDnUnt_Umt_is_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">s</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">r</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <span class="id" type="var">_</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">s</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">exists</span></a> <span class="id" type="var">p</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">:</span></a> <span class="id" type="var">s</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">_</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:e'x'ists_x_:_x_,_x"><span class="id" type="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#s_UmDnUnt_Umt"><span class="id" type="definition">s_UmDnUnt_Umt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:x_=_x"><span class="id" type="notation">=</span></a> <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">r</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span>; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> 1 <span class="id" type="var">t</span>)).<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Nil'"><span class="id" type="abbreviation">Nil'</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> 1 <span class="id" type="var">t</span>))).<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#p_UmDSnUSnt_UmDnUnt"><span class="id" type="definition">p_UmDSnUSnt_UmDnUnt</span></a> <span class="id" type="var">m</span> 0 <span class="id" type="var">t</span>).<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="tactic">simpl</span> <span class="id" type="keyword">in</span> <span class="id" type="var">IHn</span>.<br/>
<span class="id" type="var">specialize</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">with</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">IHn</span> <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> [<span class="id" type="var">r</span> [<span class="id" type="var">p</span> <span class="id" type="var">IH</span>]]].<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">s</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#p_UmDSnUSnt_UmDnUnt"><span class="id" type="definition">p_UmDSnUSnt_UmDnUnt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>) <span class="id" type="var">r</span>).<br/>
<span class="id" type="var">exists</span> <span class="id" type="var">p</span>.<br/>
<span class="id" type="tactic">reflexivity</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_strict_append_Unpsin_USnpsiSn"><span class="id" type="lemma">embed_strict_append_Unpsin_USnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span> (<span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">n</span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#embed_strict"><span class="id" type="definition">embed_strict</span></a> <span class="id" type="var">r</span> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_Unpsin_USnpsiSn"><span class="id" type="definition">s_Unpsin_USnpsiSn</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span>]; <span class="id" type="tactic">simpl</span>;<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">s_Unpsin_USnpsiSn</span>; <span class="id" type="tactic">simpl</span>; <span class="id" type="tactic">unfold</span> <span class="id" type="var">eq_rect_r</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>); <span class="id" type="tactic">intro</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_refl"><span class="id" type="lemma">embed_refl</span></a>.<br/>
<span class="id" type="var">revert</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_Sm"><span class="id" type="lemma">plus_n_Sm</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_O"><span class="id" type="lemma">plus_n_O</span></a>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">r</span>.<br/>
<span class="id" type="tactic">destruct</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_UmDnUnt_Umt_is_cons"><span class="id" type="lemma">s_UmDnUnt_Umt_is_cons</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))) <span class="id" type="keyword">as</span> [<span class="id" type="var">s</span> [<span class="id" type="var">q</span> [<span class="id" type="var">p</span> <span class="id" type="var">H</span>]]].<br/>
<span class="id" type="tactic">rewrite</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_append_right"><span class="id" type="lemma">embed_append_right</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_s_psi_Unpsin"><span class="id" type="lemma">wf_s_psi_Unpsin</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>, <span class="id" type="keyword">wf</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#wf_finite"><span class="id" type="lemma">wf_finite</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_psi_Unpsin"><span class="id" type="lemma">finite_s_psi_Unpsin</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_s_psi_repeat_U"><span class="id" type="lemma">wf_s_psi_repeat_U</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_repeat_U"><span class="id" type="definition">s_psi_repeat_U</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_s_psi_Unpsin"><span class="id" type="lemma">wf_s_psi_Unpsin</span></a>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#embed_strict_append_Unpsin_USnpsiSn"><span class="id" type="lemma">embed_strict_append_Unpsin_USnpsiSn</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_strict_trans"><span class="id" type="lemma">embed_strict_trans</span></a> <span class="id" type="keyword">with</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> <span class="id" type="var">m</span>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_Unpsin"><span class="id" type="definition">s_psi_Unpsin</span></a> <span class="id" type="var">m</span>).<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHle</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#embed_strict_append_Unpsin_USnpsiSn"><span class="id" type="lemma">embed_strict_append_Unpsin_USnpsiSn</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">Well-formedness of psi -&gt;&gt; DDD...</h2>


<br/> <br/>
   We first prove all finite prefixes are indeed finite. Then we prove that
   every branch of the <span class="inlinecode"><span class="id" type="var">Lim</span></span> constructor is embedded in the next branch. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_DmUnDnt_Dmt"><span class="id" type="lemma">finite_s_DmUnDnt_Dmt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#snoc_finite"><span class="id" type="lemma">snoc_finite</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is very unclear to me why we have to take this statement apart. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="finite_s_DnU2npsin_DSnU2SnpsiSn_helper"><span class="id" type="lemma">finite_s_DnU2npsin_DSnU2SnpsiSn_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_rect"><span class="id" type="definition">eq_rect</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">y</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">y</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_rect"><span class="id" type="definition">eq_rect</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>))) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> <span class="id" type="var">n</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">n</span> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" type="lemma">eq_sym</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_DmUnDnt_Dmt"><span class="id" type="lemma">finite_s_DmUnDnt_Dmt</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">finite_s_DnU2npsin_DSnU2SnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">s_DnU2npsin_DSnU2SnpsiSn</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">eq_rect_r</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_DnU2npsin_DSnU2SnpsiSn_helper"><span class="id" type="lemma">finite_s_DnU2npsin_DSnU2SnpsiSn_helper</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is very unclear to me why we have to take this statement apart. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="finite_s_psi_DSnU2SnpsiSn_helper"><span class="id" type="lemma">finite_s_psi_DSnU2SnpsiSn_helper</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_rect"><span class="id" type="definition">eq_rect</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#DnUnt"><span class="id" type="definition">DnUnt</span></a> 1 (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> 1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">y</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> =&gt; <span class="id" type="var">y</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">(</span></a><a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> 1<a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Nil'"><span class="id" type="abbreviation">Nil'</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> 1)) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> 0) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" type="lemma">eq_sym</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#psin_eq_DS2nUS2nUpsiSn"><span class="id" type="lemma">psin_eq_DS2nUS2nUpsiSn</span></a> 0))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="var">elim_eq_rect</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="finite_s_psi_DSnU2SnpsiSn"><span class="id" type="lemma">finite_s_psi_DSnU2SnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>, <a class="idref" href="Rewriting.html#finite"><span class="id" type="definition">finite</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">s_DnU2npsin_DSnU2SnpsiSn</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">eq_rect_r</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span>; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_psi_DSnU2SnpsiSn_helper"><span class="id" type="lemma">finite_s_psi_DSnU2SnpsiSn_helper</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#append_finite"><span class="id" type="lemma">append_finite</span></a>.<br/>
<span class="id" type="tactic">exact</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="tactic">exact</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">finite_s_DnU2npsin_DSnU2SnpsiSn</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We use this predicate and the following lemmas to prove well-formedness.
   Yes, this is ugly and a bit of a hack. 
</div>
<div class="code">
<span class="id" type="keyword">Fixpoint</span> <a name="is_cons"><span class="id" type="definition">is_cons</span></a> <span class="id" type="var">s</span> <span class="id" type="var">t</span> (<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) : <span class="id" type="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id" type="keyword">match</span> <span class="id" type="var">r</span> <span class="id" type="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Nil"><span class="id" type="constructor">Nil</span></a> <span class="id" type="var">_</span>          =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Cons"><span class="id" type="constructor">Cons</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">q</span> <span class="id" type="var">_</span> <span class="id" type="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#True"><span class="id" type="inductive">True</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Rewriting.html#Lim"><span class="id" type="constructor">Lim</span></a> <span class="id" type="var">_</span> <span class="id" type="var">_</span> <span class="id" type="var">f</span> <span class="id" type="var">t</span> <span class="id" type="var">c</span>  =&gt; <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#False"><span class="id" type="inductive">False</span></a><br/>
&nbsp;&nbsp;<span class="id" type="keyword">end</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="is_cons_snoc"><span class="id" type="lemma">is_cons_snoc</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> (<span class="id" type="var">p</span> : <span class="id" type="var">s</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_[>]_x"><span class="id" type="notation">[&gt;]</span></a> <span class="id" type="var">t</span>) (<span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a> <span class="id" type="var">r</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a> (<a class="idref" href="Rewriting.html#snoc"><span class="id" type="definition">snoc</span></a> <span class="id" type="var">p</span> <span class="id" type="var">r</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">r</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="append_is_cons"><span class="id" type="lemma">append_is_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">s</span> <span class="id" type="var">t</span> <span class="id" type="var">u</span> (<span class="id" type="var">r</span> : <span class="id" type="var">s</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">t</span>) (<span class="id" type="var">q</span> : <span class="id" type="var">t</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <span class="id" type="var">u</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a> <span class="id" type="var">q</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#embed_strict"><span class="id" type="definition">embed_strict</span></a> <span class="id" type="var">r</span> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> <span class="id" type="var">q</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">q</span>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="var">exists</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#inl"><span class="id" type="constructor">inl</span></a> <span class="id" type="var">_</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#tt"><span class="id" type="constructor">tt</span></a>).<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#embed_append_right"><span class="id" type="lemma">embed_append_right</span></a>.<br/>
<span class="id" type="tactic">elim</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="is_cons_s_DmUnDnt_Dmt"><span class="id" type="lemma">is_cons_s_DmUnDnt_Dmt</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">m</span> <span class="id" type="var">n</span> <span class="id" type="var">t</span>, <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> <span class="id" type="var">m</span> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) <span class="id" type="var">t</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">n</span> <span class="id" type="keyword">as</span> [| <span class="id" type="var">n</span> <span class="id" type="var">IH</span>]; <span class="id" type="tactic">intro</span> <span class="id" type="var">t</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#I"><span class="id" type="constructor">I</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons_snoc"><span class="id" type="lemma">is_cons_snoc</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IH</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
It is very unclear to me why we have to take this statement apart. 
</div>
<div class="code">
<span class="id" type="keyword">Lemma</span> <a name="is_cons_s_DnU2npsin_DSnU2SnpsiSn_helper"><span class="id" type="lemma">is_cons_s_DnU2npsin_DSnU2SnpsiSn_helper</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>,<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_rect"><span class="id" type="definition">eq_rect</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">y</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) <span class="id" type="var">y</span>) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_rect"><span class="id" type="definition">eq_rect</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" type="keyword">fun</span> <span class="id" type="var">t</span> : <a class="idref" href="NoUniqueNormalFormsWO.html#term"><span class="id" type="abbreviation">term</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <span class="id" type="var">t</span>))) <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#s_DmUnDnt_Dmt"><span class="id" type="definition">s_DmUnDnt_Dmt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#UUnt_eq_UnUt"><span class="id" type="lemma">UUnt_eq_UnUt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" type="lemma">eq_sym</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#DDnt_eq_DnDt"><span class="id" type="lemma">DDnt_eq_DnDt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons_snoc"><span class="id" type="lemma">is_cons_snoc</span></a>.<br/>
<span class="id" type="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#plus_n_Sm"><span class="id" type="lemma">plus_n_Sm</span></a>.<br/>
<span class="id" type="tactic">exact</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#is_cons_s_DmUnDnt_Dmt"><span class="id" type="lemma">is_cons_s_DmUnDnt_Dmt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#D"><span class="id" type="constructor">D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#U"><span class="id" type="constructor">U</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_@_x"><span class="id" type="notation">@</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">(</span></a><span class="id" type="var">n</span> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">+</span></a> 0<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_+_x"><span class="id" type="notation">)</span></a>)) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))))).<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="is_cons_s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">is_cons_s_DnU2npsin_DSnU2SnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span>, 0 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_<_x"><span class="id" type="notation">&lt;</span></a> <span class="id" type="var">n</span> -&gt; <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons"><span class="id" type="definition">is_cons</span></a> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">s_DnU2npsin_DSnU2SnpsiSn</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">unfold</span> <span class="id" type="var">eq_rect_r</span>; <span class="id" type="tactic">repeat</span> (<span class="id" type="var">elim_eq_rect</span> ; <span class="id" type="tactic">simpl</span>).<br/>
<span class="id" type="tactic">destruct</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">inversion</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons_s_DnU2npsin_DSnU2SnpsiSn_helper"><span class="id" type="lemma">is_cons_s_DnU2npsin_DSnU2SnpsiSn_helper</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="embed_strict_append_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">embed_strict_append_DnU2npsin_DSnU2SnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">t</span> <span class="id" type="var">n</span> (<span class="id" type="var">r</span> : <span class="id" type="var">t</span> <a class="idref" href="NoUniqueNormalFormsWO.html#::x_->>_x"><span class="id" type="notation">-&gt;&gt;</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#Dnt"><span class="id" type="definition">Dnt</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>) (<a class="idref" href="NoUniqueNormalFormsWO.html#Unt"><span class="id" type="definition">Unt</span></a> (2 <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">(</span></a><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span><a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Peano.html#:nat_scope:x_*_x"><span class="id" type="notation">)</span></a>) (<a class="idref" href="NoUniqueNormalFormsWO.html#psi'"><span class="id" type="definition">psi'</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>)))),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Rewriting.html#embed_strict"><span class="id" type="definition">embed_strict</span></a> <span class="id" type="var">r</span> (<a class="idref" href="Rewriting.html#append"><span class="id" type="definition">append</span></a> <span class="id" type="var">r</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="definition">s_DnU2npsin_DSnU2SnpsiSn</span></a> (<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#S"><span class="id" type="constructor">S</span></a> <span class="id" type="var">n</span>))).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intros</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#append_is_cons"><span class="id" type="lemma">append_is_cons</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#is_cons_s_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">is_cons_s_DnU2npsin_DSnU2SnpsiSn</span></a>.<br/>
<span class="id" type="tactic">intuition</span>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_s_psi_DSnU2SnpsiSn"><span class="id" type="lemma">wf_s_psi_DSnU2SnpsiSn</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">forall</span> <span class="id" type="var">n</span> : <a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" type="inductive">nat</span></a>, <span class="id" type="keyword">wf</span> (<a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <span class="id" type="var">n</span>).<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">n</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="Rewriting.html#wf_finite"><span class="id" type="lemma">wf_finite</span></a>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#finite_s_psi_DSnU2SnpsiSn"><span class="id" type="lemma">finite_s_psi_DSnU2SnpsiSn</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="wf_s_psi_repeat_D"><span class="id" type="lemma">wf_s_psi_repeat_D</span></a> :<br/>
&nbsp;&nbsp;<span class="id" type="keyword">wf</span> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_repeat_D"><span class="id" type="definition">s_psi_repeat_D</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">split</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_s_psi_DSnU2SnpsiSn"><span class="id" type="lemma">wf_s_psi_DSnU2SnpsiSn</span></a>.<br/>
<span class="id" type="tactic">intros</span> <span class="id" type="var">n</span> <span class="id" type="var">m</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">induction</span> <span class="id" type="var">H</span>; <span class="id" type="tactic">simpl</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#embed_strict_append_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">embed_strict_append_DnU2npsin_DSnU2SnpsiSn</span></a>.<br/>
<span class="id" type="tactic">apply</span> (<a class="idref" href="Rewriting.html#embed_strict_trans"><span class="id" type="lemma">embed_strict_trans</span></a> (<span class="id" type="var">q</span> := <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_DSnU2SnpsiSn"><span class="id" type="definition">s_psi_DSnU2SnpsiSn</span></a> <span class="id" type="var">m</span>)).<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">IHle</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#embed_strict_append_DnU2npsin_DSnU2SnpsiSn"><span class="id" type="lemma">embed_strict_append_DnU2npsin_DSnU2SnpsiSn</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h1 class="section">Conclusions</h1>


<br/> <br/>
   We conclude by taking our results together, showing this TRS does not
   have the unique normal forms property. We then generalise this to
   show that weak orthogonality does not imply unique normal forms. 
</div>
<div class="code">

<br/>
<span class="id" type="keyword">Lemma</span> <a name="no_unique_normal_forms_UD"><span class="id" type="lemma">no_unique_normal_forms_UD</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <a class="idref" href="Rewriting.html#unique_normal_forms"><span class="id" type="definition">unique_normal_forms</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#UD_trs"><span class="id" type="definition">UD_trs</span></a>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#neq_repeat_D_repeat_U"><span class="id" type="lemma">neq_repeat_D_repeat_U</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span> <span class="id" type="keyword">with</span> <a class="idref" href="NoUniqueNormalFormsWO.html#psi"><span class="id" type="definition">psi</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_repeat_D"><span class="id" type="definition">s_psi_repeat_D</span></a> <a class="idref" href="NoUniqueNormalFormsWO.html#s_psi_repeat_U"><span class="id" type="definition">s_psi_repeat_U</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_s_psi_repeat_D"><span class="id" type="lemma">wf_s_psi_repeat_D</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#wf_s_psi_repeat_U"><span class="id" type="lemma">wf_s_psi_repeat_U</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#normal_form_repeat_D"><span class="id" type="lemma">normal_form_repeat_D</span></a>.<br/>
<span class="id" type="tactic">exact</span> <a class="idref" href="NoUniqueNormalFormsWO.html#normal_form_repeat_U"><span class="id" type="lemma">normal_form_repeat_U</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>

<br/>
<span class="id" type="keyword">Lemma</span> <a name="no_unique_normal_forms_wo"><span class="id" type="lemma">no_unique_normal_forms_wo</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/stdlib/Coq.Init.Logic.html#:type_scope:~_x"><span class="id" type="notation">~</span></a> <span class="id" type="keyword">forall</span> <span class="id" type="var">F</span> <span class="id" type="var">X</span> <span class="id" type="var">trs</span>, <a class="idref" href="Rewriting.html#weakly_orthogonal"><span class="id" type="definition">weakly_orthogonal</span></a> (<span class="id" type="var">F</span> := <span class="id" type="var">F</span>) (<span class="id" type="var">X</span> := <span class="id" type="var">X</span>) <span class="id" type="var">trs</span> -&gt; <a class="idref" href="Rewriting.html#unique_normal_forms"><span class="id" type="definition">unique_normal_forms</span></a> <span class="id" type="var">trs</span>.<br/>
<span class="id" type="keyword">Proof</span>.<br/>
<span class="id" type="tactic">intro</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#no_unique_normal_forms_UD"><span class="id" type="lemma">no_unique_normal_forms_UD</span></a>.<br/>
<span class="id" type="tactic">apply</span> <span class="id" type="var">H</span>.<br/>
<span class="id" type="tactic">apply</span> <a class="idref" href="NoUniqueNormalFormsWO.html#weakly_orthogonal_UD"><span class="id" type="lemma">weakly_orthogonal_UD</span></a>.<br/>
<span class="id" type="keyword">Qed</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>